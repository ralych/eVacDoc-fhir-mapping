<StructureMap 
  xmlns="http://hl7.org/fhir">
  <id value="eVacDocToBundle"></id>
  <text>
    <status value="generated"></status>
    <div 
      xmlns="http://www.w3.org/1999/xhtml">
      <pre>map "http://fhir.ch/ig/evacdoc-fhir-maps/StructureMap/eVacDocToBundle" = "eVacDocToBundle"

// eVACDOC (v2016.1, v1.4) to FHIR Bundle mapping
// 2021-08-06 Roeland Luykx, copyright RALY GmbH, Apache License
// CDA-CH-VACD:  https://art-decor.org/art-decor/decor-project--cdachvacd-
// FHIR CH-VACD: http://fhir.ch/ig/ch-vacd/index.html
// conceptmap "administrativeGender" {
// prefix s = "http://terminology.hl7.org/ValueSet/v3-AdministrativeGender"
// prefix t = "http://hl7.org/fhir/ValueSet/administrative-gender"

// s:M == t:male
// s:F == t:female
// }
// conceptmap "addressUse" {
// // http://hl7.org/fhir/cm-address-use-v3.html
// prefix s = "http://terminology.hl7.org/ValueSet/v3-AddressUse"
// prefix t = "http://hl7.org/fhir/valueset-address-use.html"

// s:"H" == t:"home" // home address -&gt; home
// s:"HP" == t: "home" // primary home -&gt; home, http://hl7.org/fhir/v3/AddressUse/cs.html
// s:"HV" == t: "home" // vacation home  -&gt; home, http://hl7.org/fhir/v3/AddressUse/cs.html

// s:"WP" == t:"work" // work place -&gt; work
// s:"DIR" == t:"work" // direct -&gt; work, http://hl7.org/fhir/v3/AddressUse/cs.html
// s:"PUB" == t:"work" // public -&gt; work, http://hl7.org/fhir/v3/AddressUse/cs.html

// s:"TMP" == t:"temp" // temporary address -&gt; Temporary

// s:"OLD" == t:"old" // no longer in use -&gt; Old / Incorrect
// s:"BAD" == t:"old" // bad address -&gt; Old / Incorrect
// }

uses "http://hl7.org/fhir/cda/StructureDefinition/ClinicalDocument" alias ClinicalDocument as source
uses "http://hl7.org/fhir/cda/StructureDefinition/AssignedAuthor" alias AssignedAuthor as source
uses "http://hl7.org/fhir/cda/StructureDefinition/AssignedEntity" alias AssignedEntity as source
uses "http://hl7.org/fhir/cda/StructureDefinition/Author" alias Author as source
uses "http://hl7.org/fhir/cda/StructureDefinition/CustodianOrganization" alias CustodianOrganization as source
uses "http://hl7.org/fhir/cda/StructureDefinition/Observation" alias Observation as source
uses "http://hl7.org/fhir/cda/StructureDefinition/PatientRole" alias PatientRole as source
uses "http://hl7.org/fhir/cda/StructureDefinition/RecordTarget" alias RecordTarget as source
uses "http://hl7.org/fhir/cda/StructureDefinition/Section" alias Section as source
uses "http://hl7.org/fhir/cda/StructureDefinition/SubstanceAdministration" alias SubstanceAdministration as source
uses "http://hl7.org/fhir/cda/StructureDefinition/CE" alias CE as source
uses "http://hl7.org/fhir/cda/StructureDefinition/AD" alias AD as source
uses "http://hl7.org/fhir/cda/StructureDefinition/ADXP" alias ADXP as source
uses "http://hl7.org/fhir/StructureDefinition/Bundle" alias Bundle as target
uses "http://hl7.org/fhir/StructureDefinition/Composition" alias Composition as produced
uses "http://hl7.org/fhir/StructureDefinition/Patient" alias Patient as produced
uses "http://hl7.org/fhir/StructureDefinition/Practitioner" alias Practitioner as produced
uses "http://hl7.org/fhir/StructureDefinition/Organization" alias Organization as produced
uses "http://hl7.org/fhir/StructureDefinition/PractitionerRole" alias PractitionerRole as produced
uses "http://hl7.org/fhir/StructureDefinition/Immunization" alias Immunization as produced
uses "http://hl7.org/fhir/StructureDefinition/ImmunizationRecommendation" alias ImmunizationRecommendation as produced
uses "http://hl7.org/fhir/StructureDefinition/Observation" alias Observation as produced
uses "http://hl7.org/fhir/StructureDefinition/Condition" alias Condition as produced

imports "http://fhir.ch/ig/cda-fhir-maps/StructureMap/CdaToFhirTypes"

group eVacDocCdaToBundle(source cda : ClinicalDocument, target bundle : Bundle) {
  cda -&gt;  bundle as b,  b.meta = create('Meta') as meta,  meta.profile as profile,  profile.value = 'http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-document-vaccination-record' "value";
  cda -&gt;  bundle.entry as e,  e.resource = create('Composition') as composition,  composition.id = uuid() as uuid,  e.fullUrl = append('urn:uuid:', uuid),  bundle.entry as e2,  e2.resource = create('Patient') as patient,  patient.id = uuid() as uuid2,  e2.fullUrl = append('urn:uuid:', uuid2),  bundle.entry as e3,  e3.resource = create('Organization') as organization,  organization.id = uuid() as uuid3,  organization.name = 'Creating Organization',  e3.fullUrl = append('urn:uuid:', uuid3) then {
    cda then eVacDocClinicalDocumentToBundle(cda, patient, organization, composition, bundle) "cdatobundle";
  } "ClinicalDocumentToBody";
}

group eVacDocClinicalDocumentToBundle(source cda : ClinicalDocument, target patient : Patient, target organization : Organization, target composition : Composition, target bundle : Bundle) {
  cda -&gt; bundle.id = uuid() "id";
  cda.id -&gt; bundle.identifier "identifier";
  cda -&gt; bundle.type = 'document' "type";
  cda.effectiveTime -&gt; bundle.timestamp;
  cda then eVacDocClinicalDocumentComposition(cda, composition, patient, organization, bundle) "composition";
  cda.component as component then {
    component.structuredBody as body then {
      body.component as component log 'component' then {
        component.section as srcSection where $this.code.empty() -&gt; composition.section as tgtSection then ClinicalDocumentSection(srcSection, patient, tgtSection, bundle);
      };
    } "body";
  };
}

group ChExtEprConfidentialityCode(source src : CE, target ext : Extension) {
  src -&gt; ext.url = 'http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-confidentialitycode' "url";
  src -&gt; ext.value = create('CodeableConcept') as value then CECodeableConcept(src, value) "code";
}

// ///////////////////////////////////////////////////////////////////////
// Composition
group eVacDocClinicalDocumentComposition(source src : ClinicalDocument, target tgt : Composition, target patientResource : Patient, target organization : Organization, target bundle : Bundle) {
  src -&gt;  tgt.meta as meta,  meta.profile as profile,  profile.value = 'http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-composition-vaccination-record' "meta";
  src.confidentialityCode as confidentialityCode then {
    confidentialityCode.code as v -&gt; tgt.confidentiality = v;
    confidentialityCode as v -&gt;  tgt.confidentiality as confidentiality,  translate(v, 'http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-confidentiality-fhir', 'Coding') as code,  confidentiality.extension as ext then eVacDocChExtEprConfidentialityCode(code, ext) "confCode";
  };
  // src.setId as setId -&gt; tgt.extension as ext then ChExtEprSetId(setId, ext) "setId";
  src.versionNumber as versionNumber -&gt; tgt.extension as ext2 then eVacDocChExtEprVersionNumber(versionNumber, ext2);
  src.languageCode -&gt; tgt.language;
  src.id -&gt; tgt.identifier "identifier";
  src -&gt; tgt.status = 'final' "status";
  // src.code -&gt; tgt.type;
  src.title as t -&gt; tgt.title = (t.dataString);
  src -&gt;  tgt.type as type,  type.coding = create('Coding') as coding,  coding.system = 'http://snomed.info/sct',  coding.code = '41000179103',  coding.display = 'Immunization record' "coding";
  src.recordTarget as recordTarget then {
    recordTarget.patientRole as patient -&gt;  tgt.subject = create('Reference') as reference,  reference.type = 'Patient',  reference.reference = ('urn:uuid:' + %patientResource.id) then eVacDocClinicalDocumentPatientRole(patient, patientResource, bundle) "subject";
  } "patientRole";
  src.componentOf as comp -&gt;  bundle.entry as e,  e.resource = create('Encounter') as encounter,  encounter.id = uuid() as uuid,  e.fullUrl = append('urn:uuid:', uuid) then {
    comp.encompassingEncounter as srcEnc -&gt;  tgt.encounter = create('Reference') as reference,  reference.type = 'Encounter',  reference.reference = ('urn:uuid:' + %encounter.id) then eVacDocClinicalDocumentEncounter(srcEnc, bundle, encounter) "srcEncounter";
  } "encompassingEncounter";
  src.effectiveTime -&gt; tgt.date;
  src.author as srcAuthor -&gt;  bundle.entry as e,  e.resource = create('Practitioner') as practitioner,  practitioner.id = uuid() as uuid2,  e.fullUrl = append('urn:uuid:', uuid2),  bundle.entry as e3,  e3.resource = create('PractitionerRole') as practionerRole,  practionerRole.id = uuid() as uuid4,  e3.fullUrl = append('urn:uuid:', uuid4),  practionerRole.organization = create('Reference') as reference1,  reference1.type = 'Organization',  reference1.reference = ('urn:uuid:' + %organization.id),  practionerRole.practitioner = create('Reference') as reference2,  reference2.type = 'Practitioner',  reference2.reference = ('urn:uuid:' + %practitioner.id),  tgt.author = create('Reference') as reference,  reference.type = 'PractitionerRole',  reference.reference = ('urn:uuid:' + %practionerRole.id) then {
    srcAuthor.time as time -&gt; reference2.extension as exttime then ChExtEprTime(time, exttime);
    srcAuthor.assignedAuthor as assignedAuthor then {
      assignedAuthor.id -&gt; practitioner.identifier;
      assignedAuthor.addr -&gt; practitioner.address;
      assignedAuthor.telecom -&gt; practitioner.telecom;
      assignedAuthor.assignedPerson as person then {
        person.name as name then {
          name.other as other -&gt;  organization.name = truncate(other, 9),  practitioner.name as practName,  practName.family = truncate(other, 9),  practName.given = (%other.substring(10));
        } "other";
      } "name";
      assignedAuthor.representedOrganization as srcOrg -&gt;  bundle.entry as e4,  e4.resource = create('Organization') as reprOrganization,  reprOrganization.id = uuid() as uuid5,  e4.fullUrl = append('urn:uuid:', uuid5),  tgt.author = create('Reference') as reference3,  reference3.type = 'Organization',  reference3.reference = ('urn:uuid:' + %reprOrganization.id) then eVacDocClinicalDocumentOrganization(srcOrg, reprOrganization);
    } "author";
  } "srcAuthor";
  src.informationRecipient as informationRecipient -&gt; bundle.entry as e then {
    informationRecipient.intendedRecipient as intendedRecipient where $this.receivedOrganization.exists() = false -&gt;  e.resource = create('Patient') as recipient,  recipient.id = uuid() as uuid,  e.fullUrl = append('urn:uuid:', uuid),  tgt.extension as ext then eVacDocChExtEprInformationRecipient(intendedRecipient, recipient, ext) "informationRecipient";
    informationRecipient.intendedRecipient as intendedRecipient then {
      intendedRecipient.receivedOrganization -&gt;  e.resource = create('Organization') as recipient,  recipient.id = uuid() as uuid2,  e.fullUrl = append('urn:uuid:', uuid2),  tgt.extension as ext then eVacDocChExtEprInformationRecipientOrganization(intendedRecipient, recipient, ext) "informationRecipientOrganization";
    } "intendedRecipientAsOrganization";
  } "entry";
  src.dataEnterer as dataEnterer -&gt;  bundle.entry as e,  e.resource = create('Person') as person,  person.id = uuid() as uuid,  e.fullUrl = append('urn:uuid:', uuid),  tgt.extension as ext then eVacDocChExtEprDataEnterer(dataEnterer, person, ext);
  src.component as component then {
    component.structuredBody as body then {
      body.component as component then {
        // Immunization Administration
        component.section as srcSection where (templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.3.23')) -&gt; tgt.section as tgtSection then eVacDocImmunizationSectionContentModule(srcSection, patientResource, tgtSection, bundle);
        // Medical Problems
        component.section as srcSection where (templateId.where(root = '2.16.840.1.113883.10.20.1.11')) -&gt; tgt.section as tgtSection then eVacDocMedicalProblemsSectionContentModule(srcSection, patientResource, tgtSection, bundle);
        // Undergone illnesses for immunization
        component.section as srcSection where (templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.3.8')) -&gt; tgt.section as tgtSection then eVacDocPastIllnessSectionContentModule(srcSection, patientResource, tgtSection, bundle);
        // Allergies
        component.section as srcSection where (templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.3.13')) -&gt; tgt.section as tgtSection then eVacDocAllergiesSectionContentModule(srcSection, patientResource, tgtSection, bundle);
        // Other relevant observations
        component.section as srcSection where (templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.3.28')) -&gt; tgt.section as tgtSection then eVacDocOtherRelevantProblemsSectionContentModule(srcSection, patientResource, tgtSection, bundle);
        // Lab
        component.section as srcSection where (templateId.where(root = '1.3.6.1.4.1.19376.1.3.3.2.1')) -&gt; tgt.section as tgtSection then eVacDocLabSectionContentModule(srcSection, patientResource, tgtSection, bundle);
        // Pregnancy
        component.section as srcSection where (templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4')) -&gt; tgt.section as tgtSection then eVacDocPregnancySectionContentModule(srcSection, patientResource, tgtSection, bundle);
        // Vaccination Recommendations
        component.section as srcSection where (templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.1.18.3.1')) -&gt; tgt.section as tgtSection then eVacDocRecommendationSectionContentModule(srcSection, patientResource, organization, tgtSection, bundle);
        // Notes
        component.section as srcSection where (templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.1.18.3.1')) -&gt; tgt.section as tgtSection then eVacDocNotesSectionContentModule(srcSection, patientResource, tgtSection, bundle);
      };
    } "body";
  };
}

// _________________________ Section Level Templates _________________________
// ///////////////////////////////////////////////////////////////////////
// IMMUNIZATION SECTION
// source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.1&amp;effectiveDate=2015-12-14T00:00:00
// target:
// 2.16.756.5.30.1.127.10.3.1, 2.16.840.1.113883.10.20.1.6, 1.3.6.1.4.1.19376.1.5.3.1.3.23
group eVacDocImmunizationSectionContentModule(source src : Section, source patient : Patient, target tgt : ,, target bundle : Bundle) {
  src.id as id -&gt; tgt.extension as ext then ChExtEprSectionId(id, ext) "sectionId";
  src.title as t -&gt; tgt.title = 'Immunization Administration';
  // (t.dataString);
  src.code -&gt;  tgt.code as code,  code.coding = create('Coding') as coding,  coding.system = 'http://loinc.org',  coding.code = '11369-6',  coding.display = 'Hx of Immunization';
  src.text as cdaText -&gt; tgt.text as fhirText then {
    cdaText -&gt; fhirText.status = 'generated' "narrativeStatus";
    cdaText as t -&gt; fhirText.div = t "narrativeText";
  } "cdaText";
  src.section as srcSection -&gt; tgt.section as tgtSection then eVacDocImmunizationSectionContentModule(srcSection, patient, tgtSection, bundle);
  src.entry as cdaEntryImm where (substanceAdministration.templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.4.12')) -&gt;  bundle.entry as e,  e.resource = create('Immunization') as immunization,  immunization.id = uuid() as uuid,  e.fullUrl = append('urn:uuid:', uuid),  tgt.entry = create('Reference') as reference,  reference.type = 'Immunization',  reference.reference = append('urn:uuid:', uuid) then {
    cdaEntryImm.substanceAdministration as substanceAdministration then ImmunizationEntry(src, substanceAdministration, patient, immunization, bundle);
  } "cdaEntryImm";
}

// ///////////////////////////////////////////////////////////////////////
// MEDICAL PROBLEMS SECTION
// source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.2&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
// target:
// 2.16.756.5.30.1.127.10.3.2, 1.3.6.1.4.1.19376.1.5.3.1.3.6, 2.16.840.1.113883.10.20.1.11
group eVacDocMedicalProblemsSectionContentModule(source src : Section, source patient : Patient, target tgt, target bundle : Bundle) {
  src.id as id -&gt; tgt.extension as ext then ChExtEprSectionId(id, ext) "sectionId";
  src.title as t -&gt; tgt.title = 'Medical Problems';
  // (t.dataString);
  src.code -&gt;  tgt.code as code,  code.coding = create('Coding') as coding,  coding.system = 'http://loinc.org',  coding.code = '11450-4',  coding.display = 'Problem list Reported' "coding";
  src.text as cdaText -&gt; tgt.text as fhirText then {
    cdaText -&gt; fhirText.status = 'generated' "narrativeStatus";
    cdaText as t -&gt; fhirText.div = t "narrativeText";
  } "cdaText";
  src.section as srcSection -&gt; tgt.section as tgtSection then eVacDocMedicalProblemsSectionContentModule(srcSection, patient, tgtSection, bundle);
}

// ///////////////////////////////////////////////////////////////////////
// PAST ILLNESSES SECTION
// source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.2&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
// target:
// 2.16.756.5.30.1.127.10.3.3,  1.3.6.1.4.1.19376.1.5.3.1.3.8
group eVacDocPastIllnessSectionContentModule(source src : Section, source patient : Patient, target tgt, target bundle : Bundle) {
  src.id as id -&gt; tgt.extension as ext then ChExtEprSectionId(id, ext) "sectionId";
  src.title as t -&gt; tgt.title = 'Undergone illnesses for immunization';
  // (t.dataString);
  src.code -&gt;  tgt.code as code,  code.coding = create('Coding') as coding,  coding.system = 'http://loinc.org',  coding.code = '11348-0',  coding.display = 'Hx of Past illness' "coding";
  src.text as cdaText -&gt; tgt.text as fhirText then {
    cdaText -&gt; fhirText.status = 'generated' "narrativeStatus";
    cdaText as t -&gt; fhirText.div = t "narrativeText";
  } "cdaText";
  src.section as srcSection -&gt; tgt.section as tgtSection then eVacDocPastIllnessSectionContentModule(srcSection, patient, tgtSection, bundle);
  src.entry as cdaEntryPI where (act.templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.4.5.2')) -&gt;  bundle.entry as e,  e.resource = create('Condition') as pastIllness,  pastIllness.id = uuid() as uuid,  e.fullUrl = append('urn:uuid:', uuid),  tgt.entry = create('Reference') as reference,  reference.type = 'Condition',  reference.reference = append('urn:uuid:', uuid) then {
    cdaEntryPI.act as act then PastIllnessEntry(src, act, patient, pastIllness, bundle);
  } "cdaEntryPI";
}

// ///////////////////////////////////////////////////////////////////////
// ALLERGIES SECTION
// source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.4&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
// target:
// 2.16.756.5.30.1.127.10.3.4, 1.3.6.1.4.1.19376.1.5.3.1.3.13, 2.16.840.1.113883.10.20.1.2
group eVacDocAllergiesSectionContentModule(source src : Section, source patient : Patient, target tgt, target bundle : Bundle) {
  src.id as id -&gt; tgt.extension as ext then ChExtEprSectionId(id, ext) "sectionId";
  src.title as t -&gt; tgt.title = 'Allergies';
  // (t.dataString);
  src.code -&gt;  tgt.code as code,  code.coding = create('Coding') as coding,  coding.system = 'http://loinc.org',  coding.code = '48765-2',  coding.display = 'Allergies and adverse reactions Document' "coding";
  src.text as cdaText -&gt; tgt.text as fhirText then {
    cdaText -&gt; fhirText.status = 'generated' "narrativeStatus";
    cdaText as t -&gt; fhirText.div = t "narrativeText";
  } "cdaText";
  src.section as srcSection -&gt; tgt.section as tgtSection then eVacDocAllergiesSectionContentModule(srcSection, patient, tgtSection, bundle);
  src.entry as cdaEntryPI where (act.templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.4.5.3')) -&gt;  bundle.entry as e,  e.resource = create('AllergyIntolerance') as allergy,  allergy.id = uuid() as uuid,  e.fullUrl = append('urn:uuid:', uuid),  tgt.entry = create('Reference') as reference,  reference.type = 'AllergyIntolerance',  reference.reference = append('urn:uuid:', uuid) then {
    cdaEntryPI.act as act then AllergyIntoleranceEntry(src, act, patient, allergy, bundle);
  } "cdaEntryPI";
}

// ///////////////////////////////////////////////////////////////////////
// OTHER RELEVANT PROBLEMS SECTION
// source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.5&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
// target:
// 2.16.756.5.30.1.127.10.3.5, 1.3.6.1.4.1.19376.1.5.3.1.3.27, 1.3.6.1.4.1.19376.1.5.3.1.3.28
group eVacDocOtherRelevantProblemsSectionContentModule(source src : Section, source patient : Patient, target tgt, target bundle : Bundle) {
  src.id as id -&gt; tgt.extension as ext then ChExtEprSectionId(id, ext) "sectionId";
  src.title as t -&gt; tgt.title = 'Other Relevant Observations';
  // (t.dataString);
  src.code -&gt;  tgt.code as code,  code.coding = create('Coding') as coding,  coding.system = 'http://loinc.org',  coding.code = '30954-2',  coding.display = 'Relevant diagnostic tests/laboratory data Narrative' "coding";
  src.text as cdaText -&gt; tgt.text as fhirText then {
    cdaText -&gt; fhirText.status = 'generated' "narrativeStatus";
    cdaText as t -&gt; fhirText.div = t "narrativeText";
  } "cdaText";
  src.section as srcSection -&gt; tgt.section as tgtSection then eVacDocOtherRelevantProblemsSectionContentModule(srcSection, patient, tgtSection, bundle);
}

// ///////////////////////////////////////////////////////////////////////
// LAB SECTION
// source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.6&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html&amp;collapsable=true
// target:
// 2.16.756.5.30.1.127.10.3.6, 1.3.6.1.4.1.19376.1.3.3.2.1
group eVacDocLabSectionContentModule(source src : Section, source patient : Patient, target tgt, target bundle : Bundle) {
  src.id as id -&gt; tgt.extension as ext then ChExtEprSectionId(id, ext) "sectionId";
  src.title as t -&gt; tgt.title = 'Lab';
  // (t.dataString);
  src.code -&gt;  tgt.code as code,  code.coding = create('Coding') as coding,  coding.system = 'http://loinc.org',  coding.code = '18727-8',  coding.display = 'Serology studies (set)' "coding";
  src.text as cdaText -&gt; tgt.text as fhirText then {
    cdaText -&gt; fhirText.status = 'generated' "narrativeStatus";
    cdaText as t -&gt; fhirText.div = t "narrativeText";
  } "cdaText";
  src.section as srcSection -&gt; tgt.section as tgtSection then eVacDocLabSectionContentModule(srcSection, patient, tgtSection, bundle);
  src.entry as cdaEntry then {
    cdaEntry.act as act then {
      act.entryRelationship as entryRelationship then {
        entryRelationship.organizer as organizer then {
          organizer.component as component -&gt;  bundle.entry as e,  e.resource = create('Observation') as observation,  observation.id = uuid() as uuid,  e.fullUrl = append('urn:uuid:', uuid),  tgt.entry = create('Reference') as reference,  reference.type = 'Observation',  reference.reference = append('urn:uuid:', uuid) then {
            component.observation as cdaObs then LaborSerologyEntry(src, cdaObs, patient, observation, bundle);
          } "entry";
        };
      };
    };
  } "cdaEntry";
}

// ///////////////////////////////////////////////////////////////////////
// PREGNANCY SECTION
// source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.7&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
// target:
// 2.16.756.5.30.1.127.10.3.7,  1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4
group eVacDocPregnancySectionContentModule(source src : Section, source patient : Patient, target tgt, target bundle : Bundle) {
  src.id as id -&gt; tgt.extension as ext then ChExtEprSectionId(id, ext) "sectionId";
  src.title as t -&gt; tgt.title = 'Pregnancy';
  // (t.dataString);
  src.code -&gt;  tgt.code as code,  code.coding = create('Coding') as coding,  coding.system = 'http://loinc.org',  coding.code = '10162-6',  coding.display = 'Pregnancies Hx' "coding";
  src.text as cdaText -&gt; tgt.text as fhirText then {
    cdaText -&gt; fhirText.status = 'generated' "narrativeStatus";
    cdaText as t -&gt; fhirText.div = t "narrativeText";
  } "cdaText";
  src.section as srcSection -&gt; tgt.section as tgtSection then eVacDocPregnancySectionContentModule(srcSection, patient, tgtSection, bundle);
  src.entry as cdaEntryPI where (observation.templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.4.13.5')) -&gt;  bundle.entry as e,  e.resource = create('Condition') as condition,  condition.id = uuid() as uuid,  e.fullUrl = append('urn:uuid:', uuid),  tgt.entry = create('Reference') as reference,  reference.type = 'Condition',  reference.reference = append('urn:uuid:', uuid) then {
    cdaEntryPI.observation as observation then PregnancyEntry(src, observation, patient, condition, bundle);
  } "cdaEntryPI";
}

// ///////////////////////////////////////////////////////////////////////
// RECOMMENDATION SECTION
// source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.8&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
// target:
// 2.16.756.5.30.1.127.10.3.8, 1.3.6.1.4.1.19376.1.5.3.1.1.18.3.1
group eVacDocRecommendationSectionContentModule(source src : Section, source patient : Patient, source organization : Organization, target tgt, target bundle : Bundle) {
  src.id as id -&gt; tgt.extension as ext then ChExtEprSectionId(id, ext) "sectionId";
  src.title as t -&gt; tgt.title = 'Vaccination Recommendations';
  // (t.dataString);
  src.code -&gt;  tgt.code as code,  code.coding = create('Coding') as coding,  coding.system = 'http://loinc.org',  coding.code = '18776-5',  coding.display = 'Plan of care note' "coding";
  src.text as cdaText -&gt; tgt.text as fhirText then {
    cdaText -&gt; fhirText.status = 'generated' "narrativeStatus";
    cdaText as t -&gt; fhirText.div = t "narrativeText";
  } "cdaText";
  src.section as srcSection -&gt; tgt.section as tgtSection then eVacDocRecommendationSectionContentModule(srcSection, patient, tgtSection, bundle);
  src.entry as cdaEntryRec where (substanceAdministration.templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.4.12.2')) -&gt;  bundle.entry as e,  e.resource = create('ImmunizationRecommendation') as immunRecomm,  immunRecomm.id = uuid() as uuid,  e.fullUrl = append('urn:uuid:', uuid),  tgt.entry = create('Reference') as reference,  reference.type = 'ImmunizationRecommendation',  reference.reference = append('urn:uuid:', uuid) then {
    cdaEntryRec.substanceAdministration as substanceAdministration then ImmunizationRecommendationEntry(src, substanceAdministration, patient, organization, immunRecomm, bundle);
  } "cdaEntryRec";
}

// ///////////////////////////////////////////////////////////////////////
// NOTES SECTION
// source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.9&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
// target:
// 2.16.756.5.30.1.127.10.3.9, 2.16.756.5.30.1.1.1:CDA-CH.Body.CodedRem
group eVacDocNotesSectionContentModule(source src : Section, source patient : Patient, target tgt, target bundle : Bundle) {
  src.id as id -&gt; tgt.extension as ext then ChExtEprSectionId(id, ext) "sectionId";
  src.title as t -&gt; tgt.title = 'Comments';
  // (t.dataString);
  src.code -&gt;  tgt.code as code,  code.coding = create('Coding') as coding,  coding.system = 'http://loinc.org',  coding.code = '48767-8',  coding.display = 'Annotation comment [Interpretation] Narrative' "coding";
  src.text as cdaText -&gt; tgt.text as fhirText then {
    cdaText -&gt; fhirText.status = 'generated' "narrativeStatus";
    cdaText as t -&gt; fhirText.div = t "narrativeText";
  } "cdaText";
  src.section as srcSection -&gt; tgt.section as tgtSection then eVacDocNotesSectionContentModule(srcSection, patient, tgtSection, bundle);
}

// _________________________ Resource Template _________________________
group eVacDocClinicalDocumentEncounter(source src : EncompassingEncounter, target bundle : Bundle, target tgt : Encounter) {
  src.id -&gt; tgt.identifier;
  src.code -&gt; tgt.type;
  src.effectiveTime -&gt; tgt.period;
  src where admissionReferralSourceCode.exists() or dischargeDispositionCode.exists() -&gt; tgt.hospitalization as hosp then {
    src.admissionReferralSourceCode -&gt; hosp.admitSource "adminReferral";
    src.dischargeDispositionCode -&gt; hosp.dischargeDisposition "discDisposition";
  } "hospitalization";
  src.encounterParticipant as srcPart -&gt; tgt.participant as tgtPart then {
    srcPart.typeCode as code -&gt; tgtPart.type = cc('http://terminology.hl7.org/CodeSystem/v3-ParticipationType', code);
    srcPart.time -&gt; tgtPart.period;
    srcPart.assignedEntity as entity -&gt;  bundle.entry as e,  e.resource = create('Practitioner') as practitioner,  practitioner.id = uuid() as uuid2,  e.fullUrl = append('urn:uuid:', uuid2) then {
      entity -&gt;  tgtPart.individual = create('Reference') as reference,  reference.type = 'Practitioner',  reference.reference = ('urn:uuid:' + %practitioner.id) then ClinicalDocumentEntityPractitioner(entity, practitioner) "entry";
    } "entity";
  } "participant";
  src.location as srcLocation then {
    srcLocation.healthCareFacility as facility -&gt;  bundle.entry as e,  e.resource = create('Location') as location,  location.id = uuid() as uuid2,  e.fullUrl = append('urn:uuid:', uuid2) then {
      facility -&gt;  tgt.location as tgtLocation,  tgtLocation.location = create('Reference') as reference,  reference.type = 'Location',  reference.reference = ('urn:uuid:' + %location.id) then ClinicalDocumentLocation(facility, bundle, location) "facLocation";
    } "facility";
  };
}

// ///////////////////////////////////////////////////////////////////////
// Document Organization
group eVacDocClinicalDocumentOrganization(source src : CustodianOrganization, target tgt : Organization) {
  src.id -&gt; tgt.identifier;
  src.name as v -&gt; tgt.name = (v.other);
  src.telecom -&gt; tgt.telecom;
  src.addr -&gt; tgt.address;
}

// _________________________ Other Templates _________________________
// ///////////////////////////////////////////////////////////////////////
// CDA Patient Role
group eVacDocClinicalDocumentPatientRole(source src : PatientRole, target tgt : Patient, target bundle : Bundle) {
  // src.id -&gt; tgt.identifier;
  src -&gt; tgt.identifier as identifier then {
    src.id as id -&gt;  identifier.type as type,  type.coding as coding,  coding.system as system,  coding.code as code then {
      src -&gt; system.value = 'http://terminology.hl7.org/CodeSystem/v2-0203' "system";
      src -&gt; code.value = 'MR' "code";
      id.extension as extension -&gt;  identifier.value as value,  value.value = extension;
      id.root as root -&gt;  identifier.system as system,  system.value = append('urn:oid:', root);
    };
  } "identifier";
  src.addr -&gt; tgt.address;
  src.telecom -&gt; tgt.telecom;
  src.patient as patient then {
    patient.name -&gt; tgt.name;
    patient.administrativeGenderCode as gender then {
      gender.code as v -&gt; tgt.gender = translate(v, 'http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/cm-v3-administrative-gender', 'code') "gender";
    } "gender";
    patient.birthTime -&gt; tgt.birthDate "birthDate";
    patient.deceasedInd as indicator where patient.deceasedTime.empty() -&gt; tgt.deceased = create('boolean') as bool then boolean(indicator, bool) "deceasedBL";
    patient.deceasedTime -&gt; tgt.deceased;
    patient.maritalStatusCode -&gt; tgt.maritalStatus "maritalStatus";
    patient.languageCommunication as language -&gt; tgt.communication as communication then {
      language.languageCode -&gt; communication.language "communication";
    } "language";
  };
  src.providerOrganization as org -&gt;  bundle.entry as e,  e.resource = create('Organization') as organization,  organization.id = uuid() as uuid3,  e.fullUrl = append('urn:uuid:', uuid3) then {
    org -&gt;  tgt.managingOrganization = create('Reference') as reference,  reference.type = 'Organization',  reference.reference = ('urn:uuid:' + %organization.id) "reference";
    org.id -&gt; organization.identifier;
    org.name as v -&gt; organization.name = (v.other);
    org.telecom -&gt; organization.telecom;
    org.addr -&gt; organization.address;
  } "organization";
}

// ///////////////////////////////////////////////////////////////////////
// CONFIDENTIALLITY CODE EXT
// http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-confidentialitycode
group eVacDocChExtEprConfidentialityCode(source src : Coding, target ext : Extension) {
  src -&gt; ext.url = 'http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-confidentialitycode' "url";
  src -&gt;  ext.value = create('CodeableConcept') as ccvalue,  ccvalue.coding as coding then {
    src.system as ss -&gt;  coding.system as cs,  cs.value = ss;
    src.code as sc -&gt;  coding.code as cc,  cc.value = sc;
    src.display as sd -&gt;  coding.display as cd,  cd.value = sd;
  } "codableconcept";
}

// ///////////////////////////////////////////////////////////////////////
// LABOR SEROLOGY ENTRY
// http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-laboratory-serology
group LaborSerologyEntry(source section : Section, source src : Observation, source patient : Patient, target observation : Observation, target bundle : Bundle) {
  src -&gt;  observation.meta as meta,  meta.profile as profile,  profile.value = 'http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-laboratory-serology' "meta";
  patient -&gt;  observation.subject = create('Reference') as reference,  reference.type = 'Patient',  reference.reference = ('urn:uuid:' + %patient.id) "patient";
  src.id -&gt; observation.identifier;
  src.statusCode where (src.statuscode.where('completed')) -&gt; observation.status = c('http://hl7.org/fhir/ValueSet/observation-status', 'final', 'Final');
  // src.effectiveTime -&gt; observation.effectiveDateTime;
  src.effectiveTime as et -&gt; observation.effective = create('dateTime') as value then TSDateTime(et, value) "value";
  src.code -&gt; observation.code;
  // src.value -&gt; observation.value;
  src.value as val where ((src.value.value.exists() = true) and (src.value.code.exists() = false)) -&gt; observation.value = create('Quantity') as value then PQQuantity(val, value);
  src.value as val where ((src.value.code.exists() = true) and (src.value.value.exists() = false)) -&gt; observation.value = create('CodeableConcept') as value then CDCodeableConcept(val, value);
  src.interpretationCode -&gt; observation.interpretation;
  src.entryRelationship as entryRelationship then {
    entryRelationship.act as act then {
      act.text as cdaText -&gt;  observation.note as note,  note.text = cdaText;
    };
  };
  src.performer as srcAuthor then BuildPerformer(srcAuthor, observation, bundle);
}

// ///////////////////////////////////////////////////////////////////////
// PREGNANCY ENTRY
// http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-pregnancy
group PregnancyEntry(source section : Section, source src : Observation, source patient : Patient, target condition : Condition, target bundle : Bundle) {
  src -&gt;  condition.meta as meta,  meta.profile as profile,  profile.value = 'http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-pastillnesses' "meta";
  patient -&gt;  condition.subject = create('Reference') as reference,  reference.type = 'Patient',  reference.reference = ('urn:uuid:' + %patient.id) "patient";
  src.id -&gt; condition.identifier;
  src.code -&gt;  condition.code as code,  code.coding = create('Coding') as coding,  coding.system = 'http://loinc.org',  coding.code = '11779-6',  coding.display = 'Delivery date Estimated from last menstrual period' "coding";
  src.value as obsvalue -&gt; condition.onset = create('dateTime') as value then TSDateTime(obsvalue, value);
}

// ///////////////////////////////////////////////////////////////////////
// ALLERGY ENTRY
// http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-allergyintolerances
group AllergyIntoleranceEntry(source section : Section, source src : Act, source patient : Patient, target allergy : AllergyIntolerance, target bundle : Bundle) {
  src -&gt;  allergy.meta as meta,  meta.profile as profile,  profile.value = 'http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-allergyintolerances' "meta";
  src.id -&gt; allergy.identifier;
  src.text as cdaText -&gt;  allergy.note as note,  note.text = cdaText;
  src.entryRelationship as entryRelationship then {
    entryRelationship.observation as observation then {
      observation.value as value then {
        value.code as cdaCode -&gt;  allergy.code as code,  code.coding = translate(cdaCode, 'http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-allergy-to-vacd-allergy-code-cm', 'Coding');
      };
      observation.code as cdaCode then {
        cdaCode.code as cc -&gt; allergy.category = translate(cc, 'http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-allergycode-to-chvacd-allergycategorie-cm', 'code');
        cdaCode.code as cc -&gt; allergy.type = translate(cc, 'http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-allergycode-to-chvacd-allergytype-cm', 'code');
      } "cdaCode";
    };
  };
}

// ///////////////////////////////////////////////////////////////////////
// PAST ILLNESS ENTRY
// http://fhir.ch/ig/ch-vacd/StructureDefinition-ch-vacd-pastillnesses.html
group PastIllnessEntry(source section : Section, source src : Act, source patient : Patient, target pastIllness : Condition, target bundle : Bundle) {
  src -&gt;  pastIllness.meta as meta,  meta.profile as profile,  profile.value = 'http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-pastillnesses' "meta";
  patient -&gt;  pastIllness.subject = create('Reference') as reference,  reference.type = 'Patient',  reference.reference = ('urn:uuid:' + %patient.id) "patient";
  src.id -&gt; pastIllness.identifier;
  src.statusCode as statuscode where (src.statusCode.where('completed')) -&gt; pastIllness.verificationStatus = cc('http://terminology.hl7.org/CodeSystem/condition-ver-status', 'confirmed', 'Confirmed');
  src.effectiveTime as et then {
    et.low as date -&gt; pastIllness.recordedDate = date;
  };
  src.entryRelationship as entryRelationship then {
    entryRelationship.observation as observation then {
      // observation.code  -&gt; pastIllness.code;
      observation.code as obscode then {
        obscode.code as codecode -&gt; pastIllness.code = translate(codecode, 'http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-diseases-to-vacd-diseasesandillnesses-cm', 'Coding');
      };
      observation.statusCode as statusCode where (observation.statusCode.where('completed')) -&gt; pastIllness.clinicalStatus = cc('http://terminology.hl7.org/CodeSystem/condition-clinical', 'resolved', 'Resolved');
      // observation.effectiveTime as effectiveTime -&gt; pastIllness.onset = create('dateTime') as value then TSDateTime(effectiveTime, value) "value";
      observation.effectiveTime as et then {
        et.low as low -&gt; pastIllness.onset = create('dateTime') as value then TSDateTime(low, value) "value";
      };
    };
  };
}

// ///////////////////////////////////////////////////////////////////////
// IMMUNIZATION RECOMMENDATION ENTRY
// http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-immunization-recommendations
group ImmunizationRecommendationEntry(source section : Section, source src : SubstanceAdministration, source patient : Patient, source organization : Organization, target immunizRecomm : ImmunizationRecommendation, target bundle : Bundle) {
  src -&gt;  immunizRecomm.meta as meta,  meta.profile as profile,  profile.value = 'http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-immunization-recommendations' "meta";
  src.id -&gt; immunizRecomm.identifier;
  src.text as text then {
    text.reference as reference then {
      reference.value as value -&gt; immunizRecomm.extension as ext then NarrativeLink(value, ext) "narrativeLink";
    };
  };
  src -&gt;  immunizRecomm.authority = create('Reference') as reference,  reference.type = 'Organization',  reference.reference = ('urn:uuid:' + %organization.id) "documentOrg";
  src.consumable as consumable then {
    consumable.manufacturedProduct as manufacturedProduct then {
      manufacturedProduct.manufacturedMaterial as manufacturedMaterial then {
        // manufacturedMaterial.name as name -&gt;  immunizRecomm.recommendation as recommendation, recommendation.description = name;
        manufacturedMaterial.name as mmcode then {
          mmcode.other as codeName -&gt;  immunizRecomm.recommendation as recommendation,  recommendation.vaccineCode = translate(codeName, 'http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-recommendation-to-vacd-vaccination-plan-cm', 'Coding') as vco last;
        } "mmcode";
      };
    };
  };
}

// ///////////////////////////////////////////////////////////////////////
// IMMUNIZATION ENTRY
// http://fhir.ch/ig/ch-vacd/StructureDefinition-ch-vacd-immunization.html
group ImmunizationEntry(source section : Section, source src : SubstanceAdministration, source patient : Patient, target immunization : Immunization, target bundle : Bundle) {
  src -&gt;  immunization.meta as meta,  meta.profile as profile,  profile.value = 'http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-immunization' "meta";
  // src.templateId as template then TemplateID(template, immunization) "templateId";
  src.id -&gt; immunization.identifier;
  patient -&gt;  immunization.patient = create('Reference') as reference,  reference.type = 'Patient',  reference.reference = ('urn:uuid:' + %patient.id) "patient";
  src -&gt; immunization.status = 'completed' "completed";
  src.text as text then {
    text.reference as reference then {
      reference.value as value -&gt; immunization.extension as ext then NarrativeLink(value, ext) "narrativeLink";
    };
  };
  // src -&gt; immunization.contained = create('Immunization') as immunization then ManufacturedMaterialEntryContentModuleStatement(src, medicationStatement, medication) "medication";
  src.consumable as consumable then {
    consumable.manufacturedProduct as manufacturedProduct then {
      manufacturedProduct.manufacturedMaterial as manufacturedMaterial then {
        // manufacturedMaterial.code as mmcode -&gt; immunization.vaccineCode as vaccineCode, vaccineCode.coding = mmcode;
        manufacturedMaterial.code as mmcode then {
          mmcode.displayName as codeId -&gt;  immunization.vaccineCode as vaccineCode,  vaccineCode.coding = translate(codeId, 'http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-vaccine-to-vacd-vaccine-cm', 'Coding');
        } "mmcode";
      };
    };
  };
  // src.author
  src.author as srcAuthor then ImmunizationPerformer(srcAuthor, immunization, bundle);
  src.entryRelationship as entryRelationship then {
    entryRelationship.observation as observation then {
      observation.code as code then {
        code.code as codeid -&gt;  immunization.protocolApplied as protocolApplied,  protocolApplied.targetDisease = translate(codeid, 'http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-procedure-to-vacd-disorder-cm', 'CodeableConcept');
      };
    };
  };
  // &lt;precondition&gt;
  src.precondition as precondition then {
    precondition.criterion as criterion then {
      criterion.code as code -&gt;  immunization.reasonCode as reasonCode,  reasonCode.coding = code "coding";
    };
  };
}

group ENString(source src : EN, target tgt : string) extends Any &lt;&lt;types&gt;&gt; {
  src.family as f -&gt;  (f.dataString) as val,  tgt.value = append('Organization ', val);
}

group eVacDocVaccineCode(source src : Coding, target tgt : Coding) {
  src.system as ss -&gt;  tgt.system as cs,  cs.value = ss;
  src.code as sc -&gt;  tgt.code as cc,  cc.value = sc;
  src.display as sd -&gt;  tgt.display as cd,  cd.value = sd;
}

group ChExtEprTime(source src : TSDateTime, target ext : Extension) {
  src -&gt; ext.url = 'http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-time' "url";
  src -&gt; ext.value = create('dateTime') as value then TSDateTime(src, value) "value";
}

group ChExtEprSectionId(source src : II, target ext : Extension) {
  src -&gt; ext.url = 'http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-sectionid' "url";
  src -&gt; ext.value = create('Identifier') as value then II(src, value) "value";
}

group NarrativeLink(source url, target ext : Extension) {
  url -&gt; ext.url = 'http://hl7.org/fhir/StructureDefinition/narrativeLink' "url";
  url -&gt;  ext.value = create('url') as value,  value.value = url "value";
}

group eVacDocExtConfCodeCodeableConcept(source src : CE, target tgt : CodeableConcept) extends Any &lt;&lt;types&gt;&gt; {
  src.originalText -&gt; tgt.text;
  src as code -&gt; tgt.coding = code "code";
}

group eVacDocChExtEprVersionNumber(source src : INT, target ext : Extension) {
  src -&gt; ext.url = 'http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-versionnumber' "url";
  src -&gt; ext.value = create('unsignedInt') as value then INT(src, value) "value";
}

group eVacDocChExtEprInformationRecipientOrganization(source src : IntendedRecipient, target organization : Organization, target ext : Extension) {
  src -&gt; ext.url = 'http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-informationrecipient' "url";
  src -&gt;  ext.value = create('Reference') as reference,  reference.type = 'Organization',  reference.reference = ('urn:uuid:' + %organization.id) "value";
  src.receivedOrganization as receivedOrganization then ClinicalDocumentOrganization(receivedOrganization, organization) "organization";
}

group eVacDocChExtEprDataEnterer(source src : DataEnterer, target person : Person, target ext : Extension) {
  src -&gt; ext.url = 'http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-dataenterer' "url";
  src.assignedEntity as assignedEntity -&gt;  ext.extension as ext,  ext.url = 'enterer',  ext.value = create('Reference') as reference,  reference.type = 'Person',  reference.reference = ('urn:uuid:' + %person.id) then ClinicalDocumentEntityPerson(assignedEntity, person) "person";
  src.time as time -&gt; ext.extension as exttime then ChExtEprTime(time, exttime);
}

group ImmunizationPerformer(source author : Author, target resource : Resource, target bundle : Bundle) {
  author as srcAuthor -&gt;  bundle.entry as e,  e.resource = create('Practitioner') as practitioner,  practitioner.id = uuid() as uuid2,  e.fullUrl = append('urn:uuid:', uuid2),  bundle.entry as e2,  e2.resource = create('Organization') as organization,  organization.id = uuid() as uuid3,  e2.fullUrl = append('urn:uuid:', uuid3),  bundle.entry as e3,  e3.resource = create('PractitionerRole') as practionerRole,  practionerRole.id = uuid() as uuid4,  e3.fullUrl = append('urn:uuid:', uuid4),  practionerRole.organization = create('Reference') as reference1,  reference1.type = 'Organization',  reference1.reference = ('urn:uuid:' + %organization.id),  practionerRole.practitioner = create('Reference') as reference2,  reference2.type = 'Practitioner',  reference2.reference = ('urn:uuid:' + %practitioner.id),  resource.performer as performer,  performer.actor = create('Reference') as reference,  reference.type = 'PractitionerRole',  reference.reference = ('urn:uuid:' + %practionerRole.id) then {
    srcAuthor.time as time -&gt; reference2.extension as exttime then ChExtEprTime(time, exttime);
    srcAuthor.assignedAuthor as assignedAuthor then {
      assignedAuthor.id -&gt; practitioner.identifier;
      assignedAuthor.addr -&gt; practitioner.address;
      assignedAuthor.addr -&gt; organization.address;
      assignedAuthor.telecom -&gt; practitioner.telecom;
      assignedAuthor.assignedPerson as person then {
        person.name -&gt; practitioner.name;
        person.name -&gt; organization.name;
      } "name";
    };
  } "srcAuthor";
}

group BuildPerformer(source author : Author, target resource : Resource, target bundle : Bundle) {
  author as srcAuthor -&gt;  bundle.entry as e,  e.resource = create('Practitioner') as practitioner,  practitioner.id = uuid() as uuid2,  e.fullUrl = append('urn:uuid:', uuid2),  bundle.entry as e2,  e2.resource = create('Organization') as organization,  organization.id = uuid() as uuid3,  e2.fullUrl = append('urn:uuid:', uuid3),  bundle.entry as e3,  e3.resource = create('PractitionerRole') as practionerRole,  practionerRole.id = uuid() as uuid4,  e3.fullUrl = append('urn:uuid:', uuid4),  practionerRole.organization = create('Reference') as reference1,  reference1.type = 'Organization',  reference1.reference = ('urn:uuid:' + %organization.id),  practionerRole.practitioner = create('Reference') as reference2,  reference2.type = 'Practitioner',  reference2.reference = ('urn:uuid:' + %practitioner.id),  resource.performer = create('Reference') as reference,  reference.type = 'PractitionerRole',  reference.reference = ('urn:uuid:' + %practionerRole.id) then {
    srcAuthor.time as time -&gt; reference2.extension as exttime then ChExtEprTime(time, exttime);
    srcAuthor.assignedEntity as assignedEntity then {
      assignedEntity.id -&gt; practitioner.identifier;
      assignedEntity.addr -&gt; practitioner.address;
      assignedEntity.addr -&gt; organization.address;
      assignedEntity.telecom -&gt; practitioner.telecom;
      assignedEntity.assignedPerson as person then {
        person.name -&gt; practitioner.name;
      };
      assignedEntity.representedOrganization as representedOrganization then {
        representedOrganization.name as name -&gt; organization.name = name;
      };
    } "assignedAuthor";
  } "srcAuthor";
}

</pre>
    </div>
  </text>
  <url value="http://fhir.ch/ig/evacdoc-fhir-maps/StructureMap/eVacDocToBundle"></url>
  <name value="eVacDocToBundle"></name>
  <description value="eVACDOC (v2016.1, v1.4) to FHIR Bundle mapping
2021-08-06 Roeland Luykx, copyright RALY GmbH, Apache License
CDA-CH-VACD:  https://art-decor.org/art-decor/decor-project--cdachvacd-
FHIR CH-VACD: http://fhir.ch/ig/ch-vacd/index.html
conceptmap &quot;administrativeGender&quot; {
prefix s = &quot;http://terminology.hl7.org/ValueSet/v3-AdministrativeGender&quot;
prefix t = &quot;http://hl7.org/fhir/ValueSet/administrative-gender&quot;

s:M == t:male
s:F == t:female
}
conceptmap &quot;addressUse&quot; {
// http://hl7.org/fhir/cm-address-use-v3.html
prefix s = &quot;http://terminology.hl7.org/ValueSet/v3-AddressUse&quot;
prefix t = &quot;http://hl7.org/fhir/valueset-address-use.html&quot;

s:&quot;H&quot; == t:&quot;home&quot; // home address -&gt; home
s:&quot;HP&quot; == t: &quot;home&quot; // primary home -&gt; home, http://hl7.org/fhir/v3/AddressUse/cs.html
s:&quot;HV&quot; == t: &quot;home&quot; // vacation home   -&gt; home, http://hl7.org/fhir/v3/AddressUse/cs.html

s:&quot;WP&quot; == t:&quot;work&quot; // work place -&gt; work
s:&quot;DIR&quot; == t:&quot;work&quot; // direct -&gt; work, http://hl7.org/fhir/v3/AddressUse/cs.html
s:&quot;PUB&quot; == t:&quot;work&quot; // public -&gt; work, http://hl7.org/fhir/v3/AddressUse/cs.html

s:&quot;TMP&quot; == t:&quot;temp&quot; // temporary address -&gt; Temporary

s:&quot;OLD&quot; == t:&quot;old&quot; // no longer in use -&gt; Old / Incorrect
s:&quot;BAD&quot; == t:&quot;old&quot; // bad address -&gt; Old / Incorrect
}"></description>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/ClinicalDocument"></url>
    <mode value="source"></mode>
    <alias value="ClinicalDocument"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/AssignedAuthor"></url>
    <mode value="source"></mode>
    <alias value="AssignedAuthor"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/AssignedEntity"></url>
    <mode value="source"></mode>
    <alias value="AssignedEntity"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/Author"></url>
    <mode value="source"></mode>
    <alias value="Author"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/CustodianOrganization"></url>
    <mode value="source"></mode>
    <alias value="CustodianOrganization"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/Observation"></url>
    <mode value="source"></mode>
    <alias value="Observation"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/PatientRole"></url>
    <mode value="source"></mode>
    <alias value="PatientRole"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/RecordTarget"></url>
    <mode value="source"></mode>
    <alias value="RecordTarget"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/Section"></url>
    <mode value="source"></mode>
    <alias value="Section"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/SubstanceAdministration"></url>
    <mode value="source"></mode>
    <alias value="SubstanceAdministration"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/CE"></url>
    <mode value="source"></mode>
    <alias value="CE"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/AD"></url>
    <mode value="source"></mode>
    <alias value="AD"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/cda/StructureDefinition/ADXP"></url>
    <mode value="source"></mode>
    <alias value="ADXP"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/StructureDefinition/Bundle"></url>
    <mode value="target"></mode>
    <alias value="Bundle"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/StructureDefinition/Composition"></url>
    <mode value="produced"></mode>
    <alias value="Composition"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/StructureDefinition/Patient"></url>
    <mode value="produced"></mode>
    <alias value="Patient"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/StructureDefinition/Practitioner"></url>
    <mode value="produced"></mode>
    <alias value="Practitioner"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/StructureDefinition/Organization"></url>
    <mode value="produced"></mode>
    <alias value="Organization"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/StructureDefinition/PractitionerRole"></url>
    <mode value="produced"></mode>
    <alias value="PractitionerRole"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/StructureDefinition/Immunization"></url>
    <mode value="produced"></mode>
    <alias value="Immunization"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/StructureDefinition/ImmunizationRecommendation"></url>
    <mode value="produced"></mode>
    <alias value="ImmunizationRecommendation"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/StructureDefinition/Observation"></url>
    <mode value="produced"></mode>
    <alias value="Observation"></alias>
  </structure>
  <structure>
    <url value="http://hl7.org/fhir/StructureDefinition/Condition"></url>
    <mode value="produced"></mode>
    <alias value="Condition"></alias>
  </structure>
  <import value="http://fhir.ch/ig/cda-fhir-maps/StructureMap/CdaToFhirTypes"></import>
  <group>
    <name value="eVacDocCdaToBundle"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="cda"></name>
      <type value="ClinicalDocument"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="value"></name>
      <source>
        <context value="cda"></context>
      </source>
      <target>
        <contextType value="variable"></contextType>
        <variable value="b"></variable>
        <transform value="copy"></transform>
        <parameter>
          <valueId value="bundle"></valueId>
        </parameter>
      </target>
      <target>
        <context value="b"></context>
        <contextType value="variable"></contextType>
        <element value="meta"></element>
        <variable value="meta"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Meta"></valueString>
        </parameter>
      </target>
      <target>
        <context value="meta"></context>
        <contextType value="variable"></contextType>
        <element value="profile"></element>
        <variable value="profile"></variable>
      </target>
      <target>
        <context value="profile"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-document-vaccination-record"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="ClinicalDocumentToBody"></name>
      <source>
        <context value="cda"></context>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="composition"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Composition"></valueString>
        </parameter>
      </target>
      <target>
        <context value="composition"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e2"></variable>
      </target>
      <target>
        <context value="e2"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="patient"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Patient"></valueString>
        </parameter>
      </target>
      <target>
        <context value="patient"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid2"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e2"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid2"></valueId>
        </parameter>
      </target>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e3"></variable>
      </target>
      <target>
        <context value="e3"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="organization"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Organization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="organization"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid3"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="organization"></context>
        <contextType value="variable"></contextType>
        <element value="name"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Creating Organization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="e3"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid3"></valueId>
        </parameter>
      </target>
      <rule>
        <name value="cdatobundle"></name>
        <source>
          <context value="cda"></context>
        </source>
        <dependent>
          <name value="eVacDocClinicalDocumentToBundle"></name>
          <variable value="cda"></variable>
          <variable value="patient"></variable>
          <variable value="organization"></variable>
          <variable value="composition"></variable>
          <variable value="bundle"></variable>
        </dependent>
      </rule>
    </rule>
  </group>
  <group>
    <name value="eVacDocClinicalDocumentToBundle"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="cda"></name>
      <type value="ClinicalDocument"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="organization"></name>
      <type value="Organization"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="composition"></name>
      <type value="Composition"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="id"></name>
      <source>
        <context value="cda"></context>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <transform value="uuid"></transform>
      </target>
    </rule>
    <rule>
      <name value="identifier"></name>
      <source>
        <context value="cda"></context>
        <element value="id"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="identifier"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="type"></name>
      <source>
        <context value="cda"></context>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="document"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="effectiveTime"></name>
      <source>
        <context value="cda"></context>
        <element value="effectiveTime"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="timestamp"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="composition"></name>
      <source>
        <context value="cda"></context>
      </source>
      <dependent>
        <name value="eVacDocClinicalDocumentComposition"></name>
        <variable value="cda"></variable>
        <variable value="composition"></variable>
        <variable value="patient"></variable>
        <variable value="organization"></variable>
        <variable value="bundle"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="component"></name>
      <source>
        <context value="cda"></context>
        <element value="component"></element>
        <variable value="component"></variable>
      </source>
      <rule>
        <name value="body"></name>
        <source>
          <context value="component"></context>
          <element value="structuredBody"></element>
          <variable value="body"></variable>
        </source>
        <rule>
          <name value="component"></name>
          <source>
            <context value="body"></context>
            <element value="component"></element>
            <variable value="component"></variable>
            <logMessage value="'component'"></logMessage>
          </source>
          <rule>
            <name value="section"></name>
            <source>
              <context value="component"></context>
              <element value="section"></element>
              <variable value="srcSection"></variable>
              <condition value="$this.code.empty()"></condition>
            </source>
            <target>
              <context value="composition"></context>
              <contextType value="variable"></contextType>
              <element value="section"></element>
              <variable value="tgtSection"></variable>
            </target>
            <dependent>
              <name value="ClinicalDocumentSection"></name>
              <variable value="srcSection"></variable>
              <variable value="patient"></variable>
              <variable value="tgtSection"></variable>
              <variable value="bundle"></variable>
            </dependent>
          </rule>
        </rule>
      </rule>
    </rule>
  </group>
  <group>
    <name value="ChExtEprConfidentialityCode"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="src"></name>
      <type value="CE"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="ext"></name>
      <type value="Extension"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="url"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="url"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-confidentialitycode"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="code"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <variable value="value"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="CodeableConcept"></valueString>
        </parameter>
      </target>
      <dependent>
        <name value="CECodeableConcept"></name>
        <variable value="src"></variable>
        <variable value="value"></variable>
      </dependent>
    </rule>
  </group>
  <group>
    <name value="eVacDocClinicalDocumentComposition"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
Composition"></documentation>
    <input>
      <name value="src"></name>
      <type value="ClinicalDocument"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <type value="Composition"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="patientResource"></name>
      <type value="Patient"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="organization"></name>
      <type value="Organization"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="meta"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="meta"></element>
        <variable value="meta"></variable>
      </target>
      <target>
        <context value="meta"></context>
        <contextType value="variable"></contextType>
        <element value="profile"></element>
        <variable value="profile"></variable>
      </target>
      <target>
        <context value="profile"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-composition-vaccination-record"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="confidentialityCode"></name>
      <source>
        <context value="src"></context>
        <element value="confidentialityCode"></element>
        <variable value="confidentialityCode"></variable>
      </source>
      <rule>
        <name value="code"></name>
        <source>
          <context value="confidentialityCode"></context>
          <element value="code"></element>
          <variable value="v"></variable>
        </source>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="confidentiality"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="v"></valueId>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="confCode"></name>
        <source>
          <context value="confidentialityCode"></context>
          <variable value="v"></variable>
        </source>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="confidentiality"></element>
          <variable value="confidentiality"></variable>
        </target>
        <target>
          <contextType value="variable"></contextType>
          <variable value="code"></variable>
          <transform value="translate"></transform>
          <parameter>
            <valueId value="v"></valueId>
          </parameter>
          <parameter>
            <valueString value="http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-confidentiality-fhir"></valueString>
          </parameter>
          <parameter>
            <valueString value="Coding"></valueString>
          </parameter>
        </target>
        <target>
          <context value="confidentiality"></context>
          <contextType value="variable"></contextType>
          <element value="extension"></element>
          <variable value="ext"></variable>
        </target>
        <dependent>
          <name value="eVacDocChExtEprConfidentialityCode"></name>
          <variable value="code"></variable>
          <variable value="ext"></variable>
        </dependent>
      </rule>
    </rule>
    <rule>
      <name value="versionNumber"></name>
      <source>
        <context value="src"></context>
        <element value="versionNumber"></element>
        <variable value="versionNumber"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext2"></variable>
      </target>
      <dependent>
        <name value="eVacDocChExtEprVersionNumber"></name>
        <variable value="versionNumber"></variable>
        <variable value="ext2"></variable>
      </dependent>
      <documentation value="src.setId as setId -&gt; tgt.extension as ext then ChExtEprSetId(setId, ext) &quot;setId&quot;;"></documentation>
    </rule>
    <rule>
      <name value="languageCode"></name>
      <source>
        <context value="src"></context>
        <element value="languageCode"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="language"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="identifier"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="identifier"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="status"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="status"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="final"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="title"></name>
      <source>
        <context value="src"></context>
        <element value="title"></element>
        <variable value="t"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="title"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="t.dataString"></valueString>
        </parameter>
      </target>
      <documentation value="src.code -&gt; tgt.type;"></documentation>
    </rule>
    <rule>
      <name value="coding"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <variable value="type"></variable>
      </target>
      <target>
        <context value="type"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Coding"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://snomed.info/sct"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="41000179103"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Immunization record"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="patientRole"></name>
      <source>
        <context value="src"></context>
        <element value="recordTarget"></element>
        <variable value="recordTarget"></variable>
      </source>
      <rule>
        <name value="subject"></name>
        <source>
          <context value="recordTarget"></context>
          <element value="patientRole"></element>
          <variable value="patient"></variable>
        </source>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="subject"></element>
          <variable value="reference"></variable>
          <transform value="create"></transform>
          <parameter>
            <valueString value="Reference"></valueString>
          </parameter>
        </target>
        <target>
          <context value="reference"></context>
          <contextType value="variable"></contextType>
          <element value="type"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="Patient"></valueString>
          </parameter>
        </target>
        <target>
          <context value="reference"></context>
          <contextType value="variable"></contextType>
          <element value="reference"></element>
          <transform value="evaluate"></transform>
          <parameter>
            <valueString value="'urn:uuid:' + %patientResource.id"></valueString>
          </parameter>
        </target>
        <dependent>
          <name value="eVacDocClinicalDocumentPatientRole"></name>
          <variable value="patient"></variable>
          <variable value="patientResource"></variable>
          <variable value="bundle"></variable>
        </dependent>
      </rule>
    </rule>
    <rule>
      <name value="encompassingEncounter"></name>
      <source>
        <context value="src"></context>
        <element value="componentOf"></element>
        <variable value="comp"></variable>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="encounter"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Encounter"></valueString>
        </parameter>
      </target>
      <target>
        <context value="encounter"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <rule>
        <name value="srcEncounter"></name>
        <source>
          <context value="comp"></context>
          <element value="encompassingEncounter"></element>
          <variable value="srcEnc"></variable>
        </source>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="encounter"></element>
          <variable value="reference"></variable>
          <transform value="create"></transform>
          <parameter>
            <valueString value="Reference"></valueString>
          </parameter>
        </target>
        <target>
          <context value="reference"></context>
          <contextType value="variable"></contextType>
          <element value="type"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="Encounter"></valueString>
          </parameter>
        </target>
        <target>
          <context value="reference"></context>
          <contextType value="variable"></contextType>
          <element value="reference"></element>
          <transform value="evaluate"></transform>
          <parameter>
            <valueString value="'urn:uuid:' + %encounter.id"></valueString>
          </parameter>
        </target>
        <dependent>
          <name value="eVacDocClinicalDocumentEncounter"></name>
          <variable value="srcEnc"></variable>
          <variable value="bundle"></variable>
          <variable value="encounter"></variable>
        </dependent>
      </rule>
    </rule>
    <rule>
      <name value="effectiveTime"></name>
      <source>
        <context value="src"></context>
        <element value="effectiveTime"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="date"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="srcAuthor"></name>
      <source>
        <context value="src"></context>
        <element value="author"></element>
        <variable value="srcAuthor"></variable>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="practitioner"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Practitioner"></valueString>
        </parameter>
      </target>
      <target>
        <context value="practitioner"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid2"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid2"></valueId>
        </parameter>
      </target>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e3"></variable>
      </target>
      <target>
        <context value="e3"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="practionerRole"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="PractitionerRole"></valueString>
        </parameter>
      </target>
      <target>
        <context value="practionerRole"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid4"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e3"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid4"></valueId>
        </parameter>
      </target>
      <target>
        <context value="practionerRole"></context>
        <contextType value="variable"></contextType>
        <element value="organization"></element>
        <variable value="reference1"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference1"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Organization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference1"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %organization.id"></valueString>
        </parameter>
      </target>
      <target>
        <context value="practionerRole"></context>
        <contextType value="variable"></contextType>
        <element value="practitioner"></element>
        <variable value="reference2"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference2"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Practitioner"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference2"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %practitioner.id"></valueString>
        </parameter>
      </target>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="author"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="PractitionerRole"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %practionerRole.id"></valueString>
        </parameter>
      </target>
      <rule>
        <name value="time"></name>
        <source>
          <context value="srcAuthor"></context>
          <element value="time"></element>
          <variable value="time"></variable>
        </source>
        <target>
          <context value="reference2"></context>
          <contextType value="variable"></contextType>
          <element value="extension"></element>
          <variable value="exttime"></variable>
        </target>
        <dependent>
          <name value="ChExtEprTime"></name>
          <variable value="time"></variable>
          <variable value="exttime"></variable>
        </dependent>
      </rule>
      <rule>
        <name value="author"></name>
        <source>
          <context value="srcAuthor"></context>
          <element value="assignedAuthor"></element>
          <variable value="assignedAuthor"></variable>
        </source>
        <rule>
          <name value="id"></name>
          <source>
            <context value="assignedAuthor"></context>
            <element value="id"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="practitioner"></context>
            <contextType value="variable"></contextType>
            <element value="identifier"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
        <rule>
          <name value="addr"></name>
          <source>
            <context value="assignedAuthor"></context>
            <element value="addr"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="practitioner"></context>
            <contextType value="variable"></contextType>
            <element value="address"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
        <rule>
          <name value="telecom"></name>
          <source>
            <context value="assignedAuthor"></context>
            <element value="telecom"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="practitioner"></context>
            <contextType value="variable"></contextType>
            <element value="telecom"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
        <rule>
          <name value="name"></name>
          <source>
            <context value="assignedAuthor"></context>
            <element value="assignedPerson"></element>
            <variable value="person"></variable>
          </source>
          <rule>
            <name value="other"></name>
            <source>
              <context value="person"></context>
              <element value="name"></element>
              <variable value="name"></variable>
            </source>
            <rule>
              <name value="other"></name>
              <source>
                <context value="name"></context>
                <element value="other"></element>
                <variable value="other"></variable>
              </source>
              <target>
                <context value="organization"></context>
                <contextType value="variable"></contextType>
                <element value="name"></element>
                <transform value="truncate"></transform>
                <parameter>
                  <valueId value="other"></valueId>
                </parameter>
                <parameter>
                  <valueInteger value="9"></valueInteger>
                </parameter>
              </target>
              <target>
                <context value="practitioner"></context>
                <contextType value="variable"></contextType>
                <element value="name"></element>
                <variable value="practName"></variable>
              </target>
              <target>
                <context value="practName"></context>
                <contextType value="variable"></contextType>
                <element value="family"></element>
                <transform value="truncate"></transform>
                <parameter>
                  <valueId value="other"></valueId>
                </parameter>
                <parameter>
                  <valueInteger value="9"></valueInteger>
                </parameter>
              </target>
              <target>
                <context value="practName"></context>
                <contextType value="variable"></contextType>
                <element value="given"></element>
                <transform value="evaluate"></transform>
                <parameter>
                  <valueString value="%other.substring(10)"></valueString>
                </parameter>
              </target>
            </rule>
          </rule>
        </rule>
        <rule>
          <name value="representedOrganization"></name>
          <source>
            <context value="assignedAuthor"></context>
            <element value="representedOrganization"></element>
            <variable value="srcOrg"></variable>
          </source>
          <target>
            <context value="bundle"></context>
            <contextType value="variable"></contextType>
            <element value="entry"></element>
            <variable value="e4"></variable>
          </target>
          <target>
            <context value="e4"></context>
            <contextType value="variable"></contextType>
            <element value="resource"></element>
            <variable value="reprOrganization"></variable>
            <transform value="create"></transform>
            <parameter>
              <valueString value="Organization"></valueString>
            </parameter>
          </target>
          <target>
            <context value="reprOrganization"></context>
            <contextType value="variable"></contextType>
            <element value="id"></element>
            <variable value="uuid5"></variable>
            <transform value="uuid"></transform>
          </target>
          <target>
            <context value="e4"></context>
            <contextType value="variable"></contextType>
            <element value="fullUrl"></element>
            <transform value="append"></transform>
            <parameter>
              <valueString value="urn:uuid:"></valueString>
            </parameter>
            <parameter>
              <valueId value="uuid5"></valueId>
            </parameter>
          </target>
          <target>
            <context value="tgt"></context>
            <contextType value="variable"></contextType>
            <element value="author"></element>
            <variable value="reference3"></variable>
            <transform value="create"></transform>
            <parameter>
              <valueString value="Reference"></valueString>
            </parameter>
          </target>
          <target>
            <context value="reference3"></context>
            <contextType value="variable"></contextType>
            <element value="type"></element>
            <transform value="copy"></transform>
            <parameter>
              <valueString value="Organization"></valueString>
            </parameter>
          </target>
          <target>
            <context value="reference3"></context>
            <contextType value="variable"></contextType>
            <element value="reference"></element>
            <transform value="evaluate"></transform>
            <parameter>
              <valueString value="'urn:uuid:' + %reprOrganization.id"></valueString>
            </parameter>
          </target>
          <dependent>
            <name value="eVacDocClinicalDocumentOrganization"></name>
            <variable value="srcOrg"></variable>
            <variable value="reprOrganization"></variable>
          </dependent>
        </rule>
      </rule>
    </rule>
    <rule>
      <name value="entry"></name>
      <source>
        <context value="src"></context>
        <element value="informationRecipient"></element>
        <variable value="informationRecipient"></variable>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <rule>
        <name value="informationRecipient"></name>
        <source>
          <context value="informationRecipient"></context>
          <element value="intendedRecipient"></element>
          <variable value="intendedRecipient"></variable>
          <condition value="$this.receivedOrganization.exists() = false"></condition>
        </source>
        <target>
          <context value="e"></context>
          <contextType value="variable"></contextType>
          <element value="resource"></element>
          <variable value="recipient"></variable>
          <transform value="create"></transform>
          <parameter>
            <valueString value="Patient"></valueString>
          </parameter>
        </target>
        <target>
          <context value="recipient"></context>
          <contextType value="variable"></contextType>
          <element value="id"></element>
          <variable value="uuid"></variable>
          <transform value="uuid"></transform>
        </target>
        <target>
          <context value="e"></context>
          <contextType value="variable"></contextType>
          <element value="fullUrl"></element>
          <transform value="append"></transform>
          <parameter>
            <valueString value="urn:uuid:"></valueString>
          </parameter>
          <parameter>
            <valueId value="uuid"></valueId>
          </parameter>
        </target>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="extension"></element>
          <variable value="ext"></variable>
        </target>
        <dependent>
          <name value="eVacDocChExtEprInformationRecipient"></name>
          <variable value="intendedRecipient"></variable>
          <variable value="recipient"></variable>
          <variable value="ext"></variable>
        </dependent>
      </rule>
      <rule>
        <name value="intendedRecipientAsOrganization"></name>
        <source>
          <context value="informationRecipient"></context>
          <element value="intendedRecipient"></element>
          <variable value="intendedRecipient"></variable>
        </source>
        <rule>
          <name value="informationRecipientOrganization"></name>
          <source>
            <context value="intendedRecipient"></context>
            <element value="receivedOrganization"></element>
          </source>
          <target>
            <context value="e"></context>
            <contextType value="variable"></contextType>
            <element value="resource"></element>
            <variable value="recipient"></variable>
            <transform value="create"></transform>
            <parameter>
              <valueString value="Organization"></valueString>
            </parameter>
          </target>
          <target>
            <context value="recipient"></context>
            <contextType value="variable"></contextType>
            <element value="id"></element>
            <variable value="uuid2"></variable>
            <transform value="uuid"></transform>
          </target>
          <target>
            <context value="e"></context>
            <contextType value="variable"></contextType>
            <element value="fullUrl"></element>
            <transform value="append"></transform>
            <parameter>
              <valueString value="urn:uuid:"></valueString>
            </parameter>
            <parameter>
              <valueId value="uuid2"></valueId>
            </parameter>
          </target>
          <target>
            <context value="tgt"></context>
            <contextType value="variable"></contextType>
            <element value="extension"></element>
            <variable value="ext"></variable>
          </target>
          <dependent>
            <name value="eVacDocChExtEprInformationRecipientOrganization"></name>
            <variable value="intendedRecipient"></variable>
            <variable value="recipient"></variable>
            <variable value="ext"></variable>
          </dependent>
        </rule>
      </rule>
    </rule>
    <rule>
      <name value="dataEnterer"></name>
      <source>
        <context value="src"></context>
        <element value="dataEnterer"></element>
        <variable value="dataEnterer"></variable>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="person"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Person"></valueString>
        </parameter>
      </target>
      <target>
        <context value="person"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext"></variable>
      </target>
      <dependent>
        <name value="eVacDocChExtEprDataEnterer"></name>
        <variable value="dataEnterer"></variable>
        <variable value="person"></variable>
        <variable value="ext"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="component"></name>
      <source>
        <context value="src"></context>
        <element value="component"></element>
        <variable value="component"></variable>
      </source>
      <rule>
        <name value="body"></name>
        <source>
          <context value="component"></context>
          <element value="structuredBody"></element>
          <variable value="body"></variable>
        </source>
        <rule>
          <name value="component"></name>
          <source>
            <context value="body"></context>
            <element value="component"></element>
            <variable value="component"></variable>
          </source>
          <rule>
            <name value="section"></name>
            <source>
              <context value="component"></context>
              <element value="section"></element>
              <variable value="srcSection"></variable>
              <condition value="(templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.3.23'))"></condition>
            </source>
            <target>
              <context value="tgt"></context>
              <contextType value="variable"></contextType>
              <element value="section"></element>
              <variable value="tgtSection"></variable>
            </target>
            <dependent>
              <name value="eVacDocImmunizationSectionContentModule"></name>
              <variable value="srcSection"></variable>
              <variable value="patientResource"></variable>
              <variable value="tgtSection"></variable>
              <variable value="bundle"></variable>
            </dependent>
            <documentation value="Immunization Administration"></documentation>
          </rule>
          <rule>
            <name value="section"></name>
            <source>
              <context value="component"></context>
              <element value="section"></element>
              <variable value="srcSection"></variable>
              <condition value="(templateId.where(root = '2.16.840.1.113883.10.20.1.11'))"></condition>
            </source>
            <target>
              <context value="tgt"></context>
              <contextType value="variable"></contextType>
              <element value="section"></element>
              <variable value="tgtSection"></variable>
            </target>
            <dependent>
              <name value="eVacDocMedicalProblemsSectionContentModule"></name>
              <variable value="srcSection"></variable>
              <variable value="patientResource"></variable>
              <variable value="tgtSection"></variable>
              <variable value="bundle"></variable>
            </dependent>
            <documentation value="Medical Problems"></documentation>
          </rule>
          <rule>
            <name value="section"></name>
            <source>
              <context value="component"></context>
              <element value="section"></element>
              <variable value="srcSection"></variable>
              <condition value="(templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.3.8'))"></condition>
            </source>
            <target>
              <context value="tgt"></context>
              <contextType value="variable"></contextType>
              <element value="section"></element>
              <variable value="tgtSection"></variable>
            </target>
            <dependent>
              <name value="eVacDocPastIllnessSectionContentModule"></name>
              <variable value="srcSection"></variable>
              <variable value="patientResource"></variable>
              <variable value="tgtSection"></variable>
              <variable value="bundle"></variable>
            </dependent>
            <documentation value="Undergone illnesses for immunization"></documentation>
          </rule>
          <rule>
            <name value="section"></name>
            <source>
              <context value="component"></context>
              <element value="section"></element>
              <variable value="srcSection"></variable>
              <condition value="(templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.3.13'))"></condition>
            </source>
            <target>
              <context value="tgt"></context>
              <contextType value="variable"></contextType>
              <element value="section"></element>
              <variable value="tgtSection"></variable>
            </target>
            <dependent>
              <name value="eVacDocAllergiesSectionContentModule"></name>
              <variable value="srcSection"></variable>
              <variable value="patientResource"></variable>
              <variable value="tgtSection"></variable>
              <variable value="bundle"></variable>
            </dependent>
            <documentation value="Allergies"></documentation>
          </rule>
          <rule>
            <name value="section"></name>
            <source>
              <context value="component"></context>
              <element value="section"></element>
              <variable value="srcSection"></variable>
              <condition value="(templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.3.28'))"></condition>
            </source>
            <target>
              <context value="tgt"></context>
              <contextType value="variable"></contextType>
              <element value="section"></element>
              <variable value="tgtSection"></variable>
            </target>
            <dependent>
              <name value="eVacDocOtherRelevantProblemsSectionContentModule"></name>
              <variable value="srcSection"></variable>
              <variable value="patientResource"></variable>
              <variable value="tgtSection"></variable>
              <variable value="bundle"></variable>
            </dependent>
            <documentation value="Other relevant observations"></documentation>
          </rule>
          <rule>
            <name value="section"></name>
            <source>
              <context value="component"></context>
              <element value="section"></element>
              <variable value="srcSection"></variable>
              <condition value="(templateId.where(root = '1.3.6.1.4.1.19376.1.3.3.2.1'))"></condition>
            </source>
            <target>
              <context value="tgt"></context>
              <contextType value="variable"></contextType>
              <element value="section"></element>
              <variable value="tgtSection"></variable>
            </target>
            <dependent>
              <name value="eVacDocLabSectionContentModule"></name>
              <variable value="srcSection"></variable>
              <variable value="patientResource"></variable>
              <variable value="tgtSection"></variable>
              <variable value="bundle"></variable>
            </dependent>
            <documentation value="Lab"></documentation>
          </rule>
          <rule>
            <name value="section"></name>
            <source>
              <context value="component"></context>
              <element value="section"></element>
              <variable value="srcSection"></variable>
              <condition value="(templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4'))"></condition>
            </source>
            <target>
              <context value="tgt"></context>
              <contextType value="variable"></contextType>
              <element value="section"></element>
              <variable value="tgtSection"></variable>
            </target>
            <dependent>
              <name value="eVacDocPregnancySectionContentModule"></name>
              <variable value="srcSection"></variable>
              <variable value="patientResource"></variable>
              <variable value="tgtSection"></variable>
              <variable value="bundle"></variable>
            </dependent>
            <documentation value="Pregnancy"></documentation>
          </rule>
          <rule>
            <name value="section"></name>
            <source>
              <context value="component"></context>
              <element value="section"></element>
              <variable value="srcSection"></variable>
              <condition value="(templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.1.18.3.1'))"></condition>
            </source>
            <target>
              <context value="tgt"></context>
              <contextType value="variable"></contextType>
              <element value="section"></element>
              <variable value="tgtSection"></variable>
            </target>
            <dependent>
              <name value="eVacDocRecommendationSectionContentModule"></name>
              <variable value="srcSection"></variable>
              <variable value="patientResource"></variable>
              <variable value="organization"></variable>
              <variable value="tgtSection"></variable>
              <variable value="bundle"></variable>
            </dependent>
            <documentation value="Vaccination Recommendations"></documentation>
          </rule>
          <rule>
            <name value="section"></name>
            <source>
              <context value="component"></context>
              <element value="section"></element>
              <variable value="srcSection"></variable>
              <condition value="(templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.1.18.3.1'))"></condition>
            </source>
            <target>
              <context value="tgt"></context>
              <contextType value="variable"></contextType>
              <element value="section"></element>
              <variable value="tgtSection"></variable>
            </target>
            <dependent>
              <name value="eVacDocNotesSectionContentModule"></name>
              <variable value="srcSection"></variable>
              <variable value="patientResource"></variable>
              <variable value="tgtSection"></variable>
              <variable value="bundle"></variable>
            </dependent>
            <documentation value="Notes"></documentation>
          </rule>
        </rule>
      </rule>
    </rule>
  </group>
  <group>
    <name value="eVacDocImmunizationSectionContentModule"></name>
    <typeMode value="none"></typeMode>
    <documentation value="_________________________ Section Level Templates _________________________
///////////////////////////////////////////////////////////////////////
IMMUNIZATION SECTION
source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.1&amp;effectiveDate=2015-12-14T00:00:00
target:
2.16.756.5.30.1.127.10.3.1, 2.16.840.1.113883.10.20.1.6, 1.3.6.1.4.1.19376.1.5.3.1.3.23"></documentation>
    <input>
      <name value="src"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <type value=","></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="sectionId"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="id"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext"></variable>
      </target>
      <dependent>
        <name value="ChExtEprSectionId"></name>
        <variable value="id"></variable>
        <variable value="ext"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="title"></name>
      <source>
        <context value="src"></context>
        <element value="title"></element>
        <variable value="t"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="title"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Immunization Administration"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="code"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="code"></variable>
      </target>
      <target>
        <context value="code"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Coding"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://loinc.org"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="11369-6"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Hx of Immunization"></valueString>
        </parameter>
      </target>
      <documentation value="(t.dataString);"></documentation>
    </rule>
    <rule>
      <name value="cdaText"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="cdaText"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="text"></element>
        <variable value="fhirText"></variable>
      </target>
      <rule>
        <name value="narrativeStatus"></name>
        <source>
          <context value="cdaText"></context>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="status"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="generated"></valueString>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="narrativeText"></name>
        <source>
          <context value="cdaText"></context>
          <variable value="t"></variable>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="div"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="t"></valueId>
          </parameter>
        </target>
      </rule>
    </rule>
    <rule>
      <name value="section"></name>
      <source>
        <context value="src"></context>
        <element value="section"></element>
        <variable value="srcSection"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="section"></element>
        <variable value="tgtSection"></variable>
      </target>
      <dependent>
        <name value="eVacDocImmunizationSectionContentModule"></name>
        <variable value="srcSection"></variable>
        <variable value="patient"></variable>
        <variable value="tgtSection"></variable>
        <variable value="bundle"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="cdaEntryImm"></name>
      <source>
        <context value="src"></context>
        <element value="entry"></element>
        <variable value="cdaEntryImm"></variable>
        <condition value="(substanceAdministration.templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.4.12'))"></condition>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="immunization"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Immunization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="immunization"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Immunization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <rule>
        <name value="substanceAdministration"></name>
        <source>
          <context value="cdaEntryImm"></context>
          <element value="substanceAdministration"></element>
          <variable value="substanceAdministration"></variable>
        </source>
        <dependent>
          <name value="ImmunizationEntry"></name>
          <variable value="src"></variable>
          <variable value="substanceAdministration"></variable>
          <variable value="patient"></variable>
          <variable value="immunization"></variable>
          <variable value="bundle"></variable>
        </dependent>
      </rule>
    </rule>
  </group>
  <group>
    <name value="eVacDocMedicalProblemsSectionContentModule"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
MEDICAL PROBLEMS SECTION
source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.2&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
target:
2.16.756.5.30.1.127.10.3.2, 1.3.6.1.4.1.19376.1.5.3.1.3.6, 2.16.840.1.113883.10.20.1.11"></documentation>
    <input>
      <name value="src"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="sectionId"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="id"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext"></variable>
      </target>
      <dependent>
        <name value="ChExtEprSectionId"></name>
        <variable value="id"></variable>
        <variable value="ext"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="title"></name>
      <source>
        <context value="src"></context>
        <element value="title"></element>
        <variable value="t"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="title"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Medical Problems"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="coding"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="code"></variable>
      </target>
      <target>
        <context value="code"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Coding"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://loinc.org"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="11450-4"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Problem list Reported"></valueString>
        </parameter>
      </target>
      <documentation value="(t.dataString);"></documentation>
    </rule>
    <rule>
      <name value="cdaText"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="cdaText"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="text"></element>
        <variable value="fhirText"></variable>
      </target>
      <rule>
        <name value="narrativeStatus"></name>
        <source>
          <context value="cdaText"></context>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="status"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="generated"></valueString>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="narrativeText"></name>
        <source>
          <context value="cdaText"></context>
          <variable value="t"></variable>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="div"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="t"></valueId>
          </parameter>
        </target>
      </rule>
    </rule>
    <rule>
      <name value="section"></name>
      <source>
        <context value="src"></context>
        <element value="section"></element>
        <variable value="srcSection"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="section"></element>
        <variable value="tgtSection"></variable>
      </target>
      <dependent>
        <name value="eVacDocMedicalProblemsSectionContentModule"></name>
        <variable value="srcSection"></variable>
        <variable value="patient"></variable>
        <variable value="tgtSection"></variable>
        <variable value="bundle"></variable>
      </dependent>
    </rule>
  </group>
  <group>
    <name value="eVacDocPastIllnessSectionContentModule"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
PAST ILLNESSES SECTION
source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.2&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
target:
2.16.756.5.30.1.127.10.3.3,   1.3.6.1.4.1.19376.1.5.3.1.3.8"></documentation>
    <input>
      <name value="src"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="sectionId"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="id"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext"></variable>
      </target>
      <dependent>
        <name value="ChExtEprSectionId"></name>
        <variable value="id"></variable>
        <variable value="ext"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="title"></name>
      <source>
        <context value="src"></context>
        <element value="title"></element>
        <variable value="t"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="title"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Undergone illnesses for immunization"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="coding"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="code"></variable>
      </target>
      <target>
        <context value="code"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Coding"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://loinc.org"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="11348-0"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Hx of Past illness"></valueString>
        </parameter>
      </target>
      <documentation value="(t.dataString);"></documentation>
    </rule>
    <rule>
      <name value="cdaText"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="cdaText"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="text"></element>
        <variable value="fhirText"></variable>
      </target>
      <rule>
        <name value="narrativeStatus"></name>
        <source>
          <context value="cdaText"></context>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="status"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="generated"></valueString>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="narrativeText"></name>
        <source>
          <context value="cdaText"></context>
          <variable value="t"></variable>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="div"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="t"></valueId>
          </parameter>
        </target>
      </rule>
    </rule>
    <rule>
      <name value="section"></name>
      <source>
        <context value="src"></context>
        <element value="section"></element>
        <variable value="srcSection"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="section"></element>
        <variable value="tgtSection"></variable>
      </target>
      <dependent>
        <name value="eVacDocPastIllnessSectionContentModule"></name>
        <variable value="srcSection"></variable>
        <variable value="patient"></variable>
        <variable value="tgtSection"></variable>
        <variable value="bundle"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="cdaEntryPI"></name>
      <source>
        <context value="src"></context>
        <element value="entry"></element>
        <variable value="cdaEntryPI"></variable>
        <condition value="(act.templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.4.5.2'))"></condition>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="pastIllness"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Condition"></valueString>
        </parameter>
      </target>
      <target>
        <context value="pastIllness"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Condition"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <rule>
        <name value="act"></name>
        <source>
          <context value="cdaEntryPI"></context>
          <element value="act"></element>
          <variable value="act"></variable>
        </source>
        <dependent>
          <name value="PastIllnessEntry"></name>
          <variable value="src"></variable>
          <variable value="act"></variable>
          <variable value="patient"></variable>
          <variable value="pastIllness"></variable>
          <variable value="bundle"></variable>
        </dependent>
      </rule>
    </rule>
  </group>
  <group>
    <name value="eVacDocAllergiesSectionContentModule"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
ALLERGIES SECTION
source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.4&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
target:
2.16.756.5.30.1.127.10.3.4, 1.3.6.1.4.1.19376.1.5.3.1.3.13, 2.16.840.1.113883.10.20.1.2"></documentation>
    <input>
      <name value="src"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="sectionId"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="id"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext"></variable>
      </target>
      <dependent>
        <name value="ChExtEprSectionId"></name>
        <variable value="id"></variable>
        <variable value="ext"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="title"></name>
      <source>
        <context value="src"></context>
        <element value="title"></element>
        <variable value="t"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="title"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Allergies"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="coding"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="code"></variable>
      </target>
      <target>
        <context value="code"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Coding"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://loinc.org"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="48765-2"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Allergies and adverse reactions Document"></valueString>
        </parameter>
      </target>
      <documentation value="(t.dataString);"></documentation>
    </rule>
    <rule>
      <name value="cdaText"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="cdaText"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="text"></element>
        <variable value="fhirText"></variable>
      </target>
      <rule>
        <name value="narrativeStatus"></name>
        <source>
          <context value="cdaText"></context>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="status"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="generated"></valueString>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="narrativeText"></name>
        <source>
          <context value="cdaText"></context>
          <variable value="t"></variable>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="div"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="t"></valueId>
          </parameter>
        </target>
      </rule>
    </rule>
    <rule>
      <name value="section"></name>
      <source>
        <context value="src"></context>
        <element value="section"></element>
        <variable value="srcSection"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="section"></element>
        <variable value="tgtSection"></variable>
      </target>
      <dependent>
        <name value="eVacDocAllergiesSectionContentModule"></name>
        <variable value="srcSection"></variable>
        <variable value="patient"></variable>
        <variable value="tgtSection"></variable>
        <variable value="bundle"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="cdaEntryPI"></name>
      <source>
        <context value="src"></context>
        <element value="entry"></element>
        <variable value="cdaEntryPI"></variable>
        <condition value="(act.templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.4.5.3'))"></condition>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="allergy"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="AllergyIntolerance"></valueString>
        </parameter>
      </target>
      <target>
        <context value="allergy"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="AllergyIntolerance"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <rule>
        <name value="act"></name>
        <source>
          <context value="cdaEntryPI"></context>
          <element value="act"></element>
          <variable value="act"></variable>
        </source>
        <dependent>
          <name value="AllergyIntoleranceEntry"></name>
          <variable value="src"></variable>
          <variable value="act"></variable>
          <variable value="patient"></variable>
          <variable value="allergy"></variable>
          <variable value="bundle"></variable>
        </dependent>
      </rule>
    </rule>
  </group>
  <group>
    <name value="eVacDocOtherRelevantProblemsSectionContentModule"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
OTHER RELEVANT PROBLEMS SECTION
source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.5&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
target:
2.16.756.5.30.1.127.10.3.5, 1.3.6.1.4.1.19376.1.5.3.1.3.27, 1.3.6.1.4.1.19376.1.5.3.1.3.28"></documentation>
    <input>
      <name value="src"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="sectionId"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="id"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext"></variable>
      </target>
      <dependent>
        <name value="ChExtEprSectionId"></name>
        <variable value="id"></variable>
        <variable value="ext"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="title"></name>
      <source>
        <context value="src"></context>
        <element value="title"></element>
        <variable value="t"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="title"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Other Relevant Observations"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="coding"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="code"></variable>
      </target>
      <target>
        <context value="code"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Coding"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://loinc.org"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="30954-2"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Relevant diagnostic tests/laboratory data Narrative"></valueString>
        </parameter>
      </target>
      <documentation value="(t.dataString);"></documentation>
    </rule>
    <rule>
      <name value="cdaText"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="cdaText"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="text"></element>
        <variable value="fhirText"></variable>
      </target>
      <rule>
        <name value="narrativeStatus"></name>
        <source>
          <context value="cdaText"></context>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="status"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="generated"></valueString>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="narrativeText"></name>
        <source>
          <context value="cdaText"></context>
          <variable value="t"></variable>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="div"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="t"></valueId>
          </parameter>
        </target>
      </rule>
    </rule>
    <rule>
      <name value="section"></name>
      <source>
        <context value="src"></context>
        <element value="section"></element>
        <variable value="srcSection"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="section"></element>
        <variable value="tgtSection"></variable>
      </target>
      <dependent>
        <name value="eVacDocOtherRelevantProblemsSectionContentModule"></name>
        <variable value="srcSection"></variable>
        <variable value="patient"></variable>
        <variable value="tgtSection"></variable>
        <variable value="bundle"></variable>
      </dependent>
    </rule>
  </group>
  <group>
    <name value="eVacDocLabSectionContentModule"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
LAB SECTION
source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.6&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html&amp;collapsable=true
target:
2.16.756.5.30.1.127.10.3.6, 1.3.6.1.4.1.19376.1.3.3.2.1"></documentation>
    <input>
      <name value="src"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="sectionId"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="id"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext"></variable>
      </target>
      <dependent>
        <name value="ChExtEprSectionId"></name>
        <variable value="id"></variable>
        <variable value="ext"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="title"></name>
      <source>
        <context value="src"></context>
        <element value="title"></element>
        <variable value="t"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="title"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Lab"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="coding"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="code"></variable>
      </target>
      <target>
        <context value="code"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Coding"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://loinc.org"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="18727-8"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Serology studies (set)"></valueString>
        </parameter>
      </target>
      <documentation value="(t.dataString);"></documentation>
    </rule>
    <rule>
      <name value="cdaText"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="cdaText"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="text"></element>
        <variable value="fhirText"></variable>
      </target>
      <rule>
        <name value="narrativeStatus"></name>
        <source>
          <context value="cdaText"></context>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="status"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="generated"></valueString>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="narrativeText"></name>
        <source>
          <context value="cdaText"></context>
          <variable value="t"></variable>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="div"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="t"></valueId>
          </parameter>
        </target>
      </rule>
    </rule>
    <rule>
      <name value="section"></name>
      <source>
        <context value="src"></context>
        <element value="section"></element>
        <variable value="srcSection"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="section"></element>
        <variable value="tgtSection"></variable>
      </target>
      <dependent>
        <name value="eVacDocLabSectionContentModule"></name>
        <variable value="srcSection"></variable>
        <variable value="patient"></variable>
        <variable value="tgtSection"></variable>
        <variable value="bundle"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="cdaEntry"></name>
      <source>
        <context value="src"></context>
        <element value="entry"></element>
        <variable value="cdaEntry"></variable>
      </source>
      <rule>
        <name value="act"></name>
        <source>
          <context value="cdaEntry"></context>
          <element value="act"></element>
          <variable value="act"></variable>
        </source>
        <rule>
          <name value="entryRelationship"></name>
          <source>
            <context value="act"></context>
            <element value="entryRelationship"></element>
            <variable value="entryRelationship"></variable>
          </source>
          <rule>
            <name value="organizer"></name>
            <source>
              <context value="entryRelationship"></context>
              <element value="organizer"></element>
              <variable value="organizer"></variable>
            </source>
            <rule>
              <name value="entry"></name>
              <source>
                <context value="organizer"></context>
                <element value="component"></element>
                <variable value="component"></variable>
              </source>
              <target>
                <context value="bundle"></context>
                <contextType value="variable"></contextType>
                <element value="entry"></element>
                <variable value="e"></variable>
              </target>
              <target>
                <context value="e"></context>
                <contextType value="variable"></contextType>
                <element value="resource"></element>
                <variable value="observation"></variable>
                <transform value="create"></transform>
                <parameter>
                  <valueString value="Observation"></valueString>
                </parameter>
              </target>
              <target>
                <context value="observation"></context>
                <contextType value="variable"></contextType>
                <element value="id"></element>
                <variable value="uuid"></variable>
                <transform value="uuid"></transform>
              </target>
              <target>
                <context value="e"></context>
                <contextType value="variable"></contextType>
                <element value="fullUrl"></element>
                <transform value="append"></transform>
                <parameter>
                  <valueString value="urn:uuid:"></valueString>
                </parameter>
                <parameter>
                  <valueId value="uuid"></valueId>
                </parameter>
              </target>
              <target>
                <context value="tgt"></context>
                <contextType value="variable"></contextType>
                <element value="entry"></element>
                <variable value="reference"></variable>
                <transform value="create"></transform>
                <parameter>
                  <valueString value="Reference"></valueString>
                </parameter>
              </target>
              <target>
                <context value="reference"></context>
                <contextType value="variable"></contextType>
                <element value="type"></element>
                <transform value="copy"></transform>
                <parameter>
                  <valueString value="Observation"></valueString>
                </parameter>
              </target>
              <target>
                <context value="reference"></context>
                <contextType value="variable"></contextType>
                <element value="reference"></element>
                <transform value="append"></transform>
                <parameter>
                  <valueString value="urn:uuid:"></valueString>
                </parameter>
                <parameter>
                  <valueId value="uuid"></valueId>
                </parameter>
              </target>
              <rule>
                <name value="observation"></name>
                <source>
                  <context value="component"></context>
                  <element value="observation"></element>
                  <variable value="cdaObs"></variable>
                </source>
                <dependent>
                  <name value="LaborSerologyEntry"></name>
                  <variable value="src"></variable>
                  <variable value="cdaObs"></variable>
                  <variable value="patient"></variable>
                  <variable value="observation"></variable>
                  <variable value="bundle"></variable>
                </dependent>
              </rule>
            </rule>
          </rule>
        </rule>
      </rule>
    </rule>
  </group>
  <group>
    <name value="eVacDocPregnancySectionContentModule"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
PREGNANCY SECTION
source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.7&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
target:
2.16.756.5.30.1.127.10.3.7,   1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4"></documentation>
    <input>
      <name value="src"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="sectionId"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="id"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext"></variable>
      </target>
      <dependent>
        <name value="ChExtEprSectionId"></name>
        <variable value="id"></variable>
        <variable value="ext"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="title"></name>
      <source>
        <context value="src"></context>
        <element value="title"></element>
        <variable value="t"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="title"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Pregnancy"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="coding"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="code"></variable>
      </target>
      <target>
        <context value="code"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Coding"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://loinc.org"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="10162-6"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Pregnancies Hx"></valueString>
        </parameter>
      </target>
      <documentation value="(t.dataString);"></documentation>
    </rule>
    <rule>
      <name value="cdaText"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="cdaText"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="text"></element>
        <variable value="fhirText"></variable>
      </target>
      <rule>
        <name value="narrativeStatus"></name>
        <source>
          <context value="cdaText"></context>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="status"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="generated"></valueString>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="narrativeText"></name>
        <source>
          <context value="cdaText"></context>
          <variable value="t"></variable>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="div"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="t"></valueId>
          </parameter>
        </target>
      </rule>
    </rule>
    <rule>
      <name value="section"></name>
      <source>
        <context value="src"></context>
        <element value="section"></element>
        <variable value="srcSection"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="section"></element>
        <variable value="tgtSection"></variable>
      </target>
      <dependent>
        <name value="eVacDocPregnancySectionContentModule"></name>
        <variable value="srcSection"></variable>
        <variable value="patient"></variable>
        <variable value="tgtSection"></variable>
        <variable value="bundle"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="cdaEntryPI"></name>
      <source>
        <context value="src"></context>
        <element value="entry"></element>
        <variable value="cdaEntryPI"></variable>
        <condition value="(observation.templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.4.13.5'))"></condition>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="condition"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Condition"></valueString>
        </parameter>
      </target>
      <target>
        <context value="condition"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Condition"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <rule>
        <name value="observation"></name>
        <source>
          <context value="cdaEntryPI"></context>
          <element value="observation"></element>
          <variable value="observation"></variable>
        </source>
        <dependent>
          <name value="PregnancyEntry"></name>
          <variable value="src"></variable>
          <variable value="observation"></variable>
          <variable value="patient"></variable>
          <variable value="condition"></variable>
          <variable value="bundle"></variable>
        </dependent>
      </rule>
    </rule>
  </group>
  <group>
    <name value="eVacDocRecommendationSectionContentModule"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
RECOMMENDATION SECTION
source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.8&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
target:
2.16.756.5.30.1.127.10.3.8, 1.3.6.1.4.1.19376.1.5.3.1.1.18.3.1"></documentation>
    <input>
      <name value="src"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="organization"></name>
      <type value="Organization"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="sectionId"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="id"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext"></variable>
      </target>
      <dependent>
        <name value="ChExtEprSectionId"></name>
        <variable value="id"></variable>
        <variable value="ext"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="title"></name>
      <source>
        <context value="src"></context>
        <element value="title"></element>
        <variable value="t"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="title"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Vaccination Recommendations"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="coding"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="code"></variable>
      </target>
      <target>
        <context value="code"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Coding"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://loinc.org"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="18776-5"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Plan of care note"></valueString>
        </parameter>
      </target>
      <documentation value="(t.dataString);"></documentation>
    </rule>
    <rule>
      <name value="cdaText"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="cdaText"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="text"></element>
        <variable value="fhirText"></variable>
      </target>
      <rule>
        <name value="narrativeStatus"></name>
        <source>
          <context value="cdaText"></context>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="status"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="generated"></valueString>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="narrativeText"></name>
        <source>
          <context value="cdaText"></context>
          <variable value="t"></variable>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="div"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="t"></valueId>
          </parameter>
        </target>
      </rule>
    </rule>
    <rule>
      <name value="section"></name>
      <source>
        <context value="src"></context>
        <element value="section"></element>
        <variable value="srcSection"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="section"></element>
        <variable value="tgtSection"></variable>
      </target>
      <dependent>
        <name value="eVacDocRecommendationSectionContentModule"></name>
        <variable value="srcSection"></variable>
        <variable value="patient"></variable>
        <variable value="tgtSection"></variable>
        <variable value="bundle"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="cdaEntryRec"></name>
      <source>
        <context value="src"></context>
        <element value="entry"></element>
        <variable value="cdaEntryRec"></variable>
        <condition value="(substanceAdministration.templateId.where(root = '1.3.6.1.4.1.19376.1.5.3.1.4.12.2'))"></condition>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="immunRecomm"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="ImmunizationRecommendation"></valueString>
        </parameter>
      </target>
      <target>
        <context value="immunRecomm"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="ImmunizationRecommendation"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid"></valueId>
        </parameter>
      </target>
      <rule>
        <name value="substanceAdministration"></name>
        <source>
          <context value="cdaEntryRec"></context>
          <element value="substanceAdministration"></element>
          <variable value="substanceAdministration"></variable>
        </source>
        <dependent>
          <name value="ImmunizationRecommendationEntry"></name>
          <variable value="src"></variable>
          <variable value="substanceAdministration"></variable>
          <variable value="patient"></variable>
          <variable value="organization"></variable>
          <variable value="immunRecomm"></variable>
          <variable value="bundle"></variable>
        </dependent>
      </rule>
    </rule>
  </group>
  <group>
    <name value="eVacDocNotesSectionContentModule"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
NOTES SECTION
source: http://art-decor.org/decor/services/RetrieveTemplate?prefix=cdachvacd-&amp;version=2017-06-13T08:50:29&amp;language=en-US&amp;ui=en-US&amp;id=2.16.756.5.30.1.127.10.3.9&amp;effectiveDate=2015-12-14T00:00:00&amp;format=html
target:
2.16.756.5.30.1.127.10.3.9, 2.16.756.5.30.1.1.1:CDA-CH.Body.CodedRem"></documentation>
    <input>
      <name value="src"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="sectionId"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="id"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext"></variable>
      </target>
      <dependent>
        <name value="ChExtEprSectionId"></name>
        <variable value="id"></variable>
        <variable value="ext"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="title"></name>
      <source>
        <context value="src"></context>
        <element value="title"></element>
        <variable value="t"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="title"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Comments"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="coding"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="code"></variable>
      </target>
      <target>
        <context value="code"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Coding"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://loinc.org"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="48767-8"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Annotation comment [Interpretation] Narrative"></valueString>
        </parameter>
      </target>
      <documentation value="(t.dataString);"></documentation>
    </rule>
    <rule>
      <name value="cdaText"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="cdaText"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="text"></element>
        <variable value="fhirText"></variable>
      </target>
      <rule>
        <name value="narrativeStatus"></name>
        <source>
          <context value="cdaText"></context>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="status"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="generated"></valueString>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="narrativeText"></name>
        <source>
          <context value="cdaText"></context>
          <variable value="t"></variable>
        </source>
        <target>
          <context value="fhirText"></context>
          <contextType value="variable"></contextType>
          <element value="div"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="t"></valueId>
          </parameter>
        </target>
      </rule>
    </rule>
    <rule>
      <name value="section"></name>
      <source>
        <context value="src"></context>
        <element value="section"></element>
        <variable value="srcSection"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="section"></element>
        <variable value="tgtSection"></variable>
      </target>
      <dependent>
        <name value="eVacDocNotesSectionContentModule"></name>
        <variable value="srcSection"></variable>
        <variable value="patient"></variable>
        <variable value="tgtSection"></variable>
        <variable value="bundle"></variable>
      </dependent>
    </rule>
  </group>
  <group>
    <name value="eVacDocClinicalDocumentEncounter"></name>
    <typeMode value="none"></typeMode>
    <documentation value="_________________________ Resource Template _________________________"></documentation>
    <input>
      <name value="src"></name>
      <type value="EncompassingEncounter"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <type value="Encounter"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="id"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="identifier"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="code"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="effectiveTime"></name>
      <source>
        <context value="src"></context>
        <element value="effectiveTime"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="period"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="hospitalization"></name>
      <source>
        <context value="src"></context>
        <condition value="admissionReferralSourceCode.exists() or dischargeDispositionCode.exists()"></condition>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="hospitalization"></element>
        <variable value="hosp"></variable>
      </target>
      <rule>
        <name value="adminReferral"></name>
        <source>
          <context value="src"></context>
          <element value="admissionReferralSourceCode"></element>
          <variable value="vvv"></variable>
        </source>
        <target>
          <context value="hosp"></context>
          <contextType value="variable"></contextType>
          <element value="admitSource"></element>
          <variable value="vvv"></variable>
          <transform value="create"></transform>
        </target>
      </rule>
      <rule>
        <name value="discDisposition"></name>
        <source>
          <context value="src"></context>
          <element value="dischargeDispositionCode"></element>
          <variable value="vvv"></variable>
        </source>
        <target>
          <context value="hosp"></context>
          <contextType value="variable"></contextType>
          <element value="dischargeDisposition"></element>
          <variable value="vvv"></variable>
          <transform value="create"></transform>
        </target>
      </rule>
    </rule>
    <rule>
      <name value="participant"></name>
      <source>
        <context value="src"></context>
        <element value="encounterParticipant"></element>
        <variable value="srcPart"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="participant"></element>
        <variable value="tgtPart"></variable>
      </target>
      <rule>
        <name value="typeCode"></name>
        <source>
          <context value="srcPart"></context>
          <element value="typeCode"></element>
          <variable value="code"></variable>
        </source>
        <target>
          <context value="tgtPart"></context>
          <contextType value="variable"></contextType>
          <element value="type"></element>
          <transform value="cc"></transform>
          <parameter>
            <valueString value="http://terminology.hl7.org/CodeSystem/v3-ParticipationType"></valueString>
          </parameter>
          <parameter>
            <valueId value="code"></valueId>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="time"></name>
        <source>
          <context value="srcPart"></context>
          <element value="time"></element>
          <variable value="vvv"></variable>
        </source>
        <target>
          <context value="tgtPart"></context>
          <contextType value="variable"></contextType>
          <element value="period"></element>
          <variable value="vvv"></variable>
          <transform value="create"></transform>
        </target>
      </rule>
      <rule>
        <name value="entity"></name>
        <source>
          <context value="srcPart"></context>
          <element value="assignedEntity"></element>
          <variable value="entity"></variable>
        </source>
        <target>
          <context value="bundle"></context>
          <contextType value="variable"></contextType>
          <element value="entry"></element>
          <variable value="e"></variable>
        </target>
        <target>
          <context value="e"></context>
          <contextType value="variable"></contextType>
          <element value="resource"></element>
          <variable value="practitioner"></variable>
          <transform value="create"></transform>
          <parameter>
            <valueString value="Practitioner"></valueString>
          </parameter>
        </target>
        <target>
          <context value="practitioner"></context>
          <contextType value="variable"></contextType>
          <element value="id"></element>
          <variable value="uuid2"></variable>
          <transform value="uuid"></transform>
        </target>
        <target>
          <context value="e"></context>
          <contextType value="variable"></contextType>
          <element value="fullUrl"></element>
          <transform value="append"></transform>
          <parameter>
            <valueString value="urn:uuid:"></valueString>
          </parameter>
          <parameter>
            <valueId value="uuid2"></valueId>
          </parameter>
        </target>
        <rule>
          <name value="entry"></name>
          <source>
            <context value="entity"></context>
          </source>
          <target>
            <context value="tgtPart"></context>
            <contextType value="variable"></contextType>
            <element value="individual"></element>
            <variable value="reference"></variable>
            <transform value="create"></transform>
            <parameter>
              <valueString value="Reference"></valueString>
            </parameter>
          </target>
          <target>
            <context value="reference"></context>
            <contextType value="variable"></contextType>
            <element value="type"></element>
            <transform value="copy"></transform>
            <parameter>
              <valueString value="Practitioner"></valueString>
            </parameter>
          </target>
          <target>
            <context value="reference"></context>
            <contextType value="variable"></contextType>
            <element value="reference"></element>
            <transform value="evaluate"></transform>
            <parameter>
              <valueString value="'urn:uuid:' + %practitioner.id"></valueString>
            </parameter>
          </target>
          <dependent>
            <name value="ClinicalDocumentEntityPractitioner"></name>
            <variable value="entity"></variable>
            <variable value="practitioner"></variable>
          </dependent>
        </rule>
      </rule>
    </rule>
    <rule>
      <name value="location"></name>
      <source>
        <context value="src"></context>
        <element value="location"></element>
        <variable value="srcLocation"></variable>
      </source>
      <rule>
        <name value="facility"></name>
        <source>
          <context value="srcLocation"></context>
          <element value="healthCareFacility"></element>
          <variable value="facility"></variable>
        </source>
        <target>
          <context value="bundle"></context>
          <contextType value="variable"></contextType>
          <element value="entry"></element>
          <variable value="e"></variable>
        </target>
        <target>
          <context value="e"></context>
          <contextType value="variable"></contextType>
          <element value="resource"></element>
          <variable value="location"></variable>
          <transform value="create"></transform>
          <parameter>
            <valueString value="Location"></valueString>
          </parameter>
        </target>
        <target>
          <context value="location"></context>
          <contextType value="variable"></contextType>
          <element value="id"></element>
          <variable value="uuid2"></variable>
          <transform value="uuid"></transform>
        </target>
        <target>
          <context value="e"></context>
          <contextType value="variable"></contextType>
          <element value="fullUrl"></element>
          <transform value="append"></transform>
          <parameter>
            <valueString value="urn:uuid:"></valueString>
          </parameter>
          <parameter>
            <valueId value="uuid2"></valueId>
          </parameter>
        </target>
        <rule>
          <name value="facLocation"></name>
          <source>
            <context value="facility"></context>
          </source>
          <target>
            <context value="tgt"></context>
            <contextType value="variable"></contextType>
            <element value="location"></element>
            <variable value="tgtLocation"></variable>
          </target>
          <target>
            <context value="tgtLocation"></context>
            <contextType value="variable"></contextType>
            <element value="location"></element>
            <variable value="reference"></variable>
            <transform value="create"></transform>
            <parameter>
              <valueString value="Reference"></valueString>
            </parameter>
          </target>
          <target>
            <context value="reference"></context>
            <contextType value="variable"></contextType>
            <element value="type"></element>
            <transform value="copy"></transform>
            <parameter>
              <valueString value="Location"></valueString>
            </parameter>
          </target>
          <target>
            <context value="reference"></context>
            <contextType value="variable"></contextType>
            <element value="reference"></element>
            <transform value="evaluate"></transform>
            <parameter>
              <valueString value="'urn:uuid:' + %location.id"></valueString>
            </parameter>
          </target>
          <dependent>
            <name value="ClinicalDocumentLocation"></name>
            <variable value="facility"></variable>
            <variable value="bundle"></variable>
            <variable value="location"></variable>
          </dependent>
        </rule>
      </rule>
    </rule>
  </group>
  <group>
    <name value="eVacDocClinicalDocumentOrganization"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
Document Organization"></documentation>
    <input>
      <name value="src"></name>
      <type value="CustodianOrganization"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <type value="Organization"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="id"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="identifier"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="name"></name>
      <source>
        <context value="src"></context>
        <element value="name"></element>
        <variable value="v"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="name"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="v.other"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="telecom"></name>
      <source>
        <context value="src"></context>
        <element value="telecom"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="telecom"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="addr"></name>
      <source>
        <context value="src"></context>
        <element value="addr"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="address"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
  </group>
  <group>
    <name value="eVacDocClinicalDocumentPatientRole"></name>
    <typeMode value="none"></typeMode>
    <documentation value="_________________________ Other Templates _________________________
///////////////////////////////////////////////////////////////////////
CDA Patient Role"></documentation>
    <input>
      <name value="src"></name>
      <type value="PatientRole"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <type value="Patient"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="identifier"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="identifier"></element>
        <variable value="identifier"></variable>
      </target>
      <rule>
        <name value="id"></name>
        <source>
          <context value="src"></context>
          <element value="id"></element>
          <variable value="id"></variable>
        </source>
        <target>
          <context value="identifier"></context>
          <contextType value="variable"></contextType>
          <element value="type"></element>
          <variable value="type"></variable>
        </target>
        <target>
          <context value="type"></context>
          <contextType value="variable"></contextType>
          <element value="coding"></element>
          <variable value="coding"></variable>
        </target>
        <target>
          <context value="coding"></context>
          <contextType value="variable"></contextType>
          <element value="system"></element>
          <variable value="system"></variable>
        </target>
        <target>
          <context value="coding"></context>
          <contextType value="variable"></contextType>
          <element value="code"></element>
          <variable value="code"></variable>
        </target>
        <rule>
          <name value="system"></name>
          <source>
            <context value="src"></context>
          </source>
          <target>
            <context value="system"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="copy"></transform>
            <parameter>
              <valueString value="http://terminology.hl7.org/CodeSystem/v2-0203"></valueString>
            </parameter>
          </target>
        </rule>
        <rule>
          <name value="code"></name>
          <source>
            <context value="src"></context>
          </source>
          <target>
            <context value="code"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="copy"></transform>
            <parameter>
              <valueString value="MR"></valueString>
            </parameter>
          </target>
        </rule>
        <rule>
          <name value="extension"></name>
          <source>
            <context value="id"></context>
            <element value="extension"></element>
            <variable value="extension"></variable>
          </source>
          <target>
            <context value="identifier"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <variable value="value"></variable>
          </target>
          <target>
            <context value="value"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="copy"></transform>
            <parameter>
              <valueId value="extension"></valueId>
            </parameter>
          </target>
        </rule>
        <rule>
          <name value="root"></name>
          <source>
            <context value="id"></context>
            <element value="root"></element>
            <variable value="root"></variable>
          </source>
          <target>
            <context value="identifier"></context>
            <contextType value="variable"></contextType>
            <element value="system"></element>
            <variable value="system"></variable>
          </target>
          <target>
            <context value="system"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="append"></transform>
            <parameter>
              <valueString value="urn:oid:"></valueString>
            </parameter>
            <parameter>
              <valueId value="root"></valueId>
            </parameter>
          </target>
        </rule>
      </rule>
      <documentation value="src.id -&gt; tgt.identifier;"></documentation>
    </rule>
    <rule>
      <name value="addr"></name>
      <source>
        <context value="src"></context>
        <element value="addr"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="address"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="telecom"></name>
      <source>
        <context value="src"></context>
        <element value="telecom"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="telecom"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="patient"></name>
      <source>
        <context value="src"></context>
        <element value="patient"></element>
        <variable value="patient"></variable>
      </source>
      <rule>
        <name value="name"></name>
        <source>
          <context value="patient"></context>
          <element value="name"></element>
          <variable value="vvv"></variable>
        </source>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="name"></element>
          <variable value="vvv"></variable>
          <transform value="create"></transform>
        </target>
      </rule>
      <rule>
        <name value="gender"></name>
        <source>
          <context value="patient"></context>
          <element value="administrativeGenderCode"></element>
          <variable value="gender"></variable>
        </source>
        <rule>
          <name value="gender"></name>
          <source>
            <context value="gender"></context>
            <element value="code"></element>
            <variable value="v"></variable>
          </source>
          <target>
            <context value="tgt"></context>
            <contextType value="variable"></contextType>
            <element value="gender"></element>
            <transform value="translate"></transform>
            <parameter>
              <valueId value="v"></valueId>
            </parameter>
            <parameter>
              <valueString value="http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/cm-v3-administrative-gender"></valueString>
            </parameter>
            <parameter>
              <valueString value="code"></valueString>
            </parameter>
          </target>
        </rule>
      </rule>
      <rule>
        <name value="birthDate"></name>
        <source>
          <context value="patient"></context>
          <element value="birthTime"></element>
          <variable value="vvv"></variable>
        </source>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="birthDate"></element>
          <variable value="vvv"></variable>
          <transform value="create"></transform>
        </target>
      </rule>
      <rule>
        <name value="deceasedBL"></name>
        <source>
          <context value="patient"></context>
          <element value="deceasedInd"></element>
          <variable value="indicator"></variable>
          <condition value="patient.deceasedTime.empty()"></condition>
        </source>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="deceased"></element>
          <variable value="bool"></variable>
          <transform value="create"></transform>
          <parameter>
            <valueString value="boolean"></valueString>
          </parameter>
        </target>
        <dependent>
          <name value="boolean"></name>
          <variable value="indicator"></variable>
          <variable value="bool"></variable>
        </dependent>
      </rule>
      <rule>
        <name value="deceasedTime"></name>
        <source>
          <context value="patient"></context>
          <element value="deceasedTime"></element>
          <variable value="vvv"></variable>
        </source>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="deceased"></element>
          <variable value="vvv"></variable>
          <transform value="create"></transform>
        </target>
      </rule>
      <rule>
        <name value="maritalStatus"></name>
        <source>
          <context value="patient"></context>
          <element value="maritalStatusCode"></element>
          <variable value="vvv"></variable>
        </source>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="maritalStatus"></element>
          <variable value="vvv"></variable>
          <transform value="create"></transform>
        </target>
      </rule>
      <rule>
        <name value="language"></name>
        <source>
          <context value="patient"></context>
          <element value="languageCommunication"></element>
          <variable value="language"></variable>
        </source>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="communication"></element>
          <variable value="communication"></variable>
        </target>
        <rule>
          <name value="communication"></name>
          <source>
            <context value="language"></context>
            <element value="languageCode"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="communication"></context>
            <contextType value="variable"></contextType>
            <element value="language"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
      </rule>
    </rule>
    <rule>
      <name value="organization"></name>
      <source>
        <context value="src"></context>
        <element value="providerOrganization"></element>
        <variable value="org"></variable>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="organization"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Organization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="organization"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid3"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid3"></valueId>
        </parameter>
      </target>
      <rule>
        <name value="reference"></name>
        <source>
          <context value="org"></context>
        </source>
        <target>
          <context value="tgt"></context>
          <contextType value="variable"></contextType>
          <element value="managingOrganization"></element>
          <variable value="reference"></variable>
          <transform value="create"></transform>
          <parameter>
            <valueString value="Reference"></valueString>
          </parameter>
        </target>
        <target>
          <context value="reference"></context>
          <contextType value="variable"></contextType>
          <element value="type"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueString value="Organization"></valueString>
          </parameter>
        </target>
        <target>
          <context value="reference"></context>
          <contextType value="variable"></contextType>
          <element value="reference"></element>
          <transform value="evaluate"></transform>
          <parameter>
            <valueString value="'urn:uuid:' + %organization.id"></valueString>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="id"></name>
        <source>
          <context value="org"></context>
          <element value="id"></element>
          <variable value="vvv"></variable>
        </source>
        <target>
          <context value="organization"></context>
          <contextType value="variable"></contextType>
          <element value="identifier"></element>
          <variable value="vvv"></variable>
          <transform value="create"></transform>
        </target>
      </rule>
      <rule>
        <name value="name"></name>
        <source>
          <context value="org"></context>
          <element value="name"></element>
          <variable value="v"></variable>
        </source>
        <target>
          <context value="organization"></context>
          <contextType value="variable"></contextType>
          <element value="name"></element>
          <transform value="evaluate"></transform>
          <parameter>
            <valueString value="v.other"></valueString>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="telecom"></name>
        <source>
          <context value="org"></context>
          <element value="telecom"></element>
          <variable value="vvv"></variable>
        </source>
        <target>
          <context value="organization"></context>
          <contextType value="variable"></contextType>
          <element value="telecom"></element>
          <variable value="vvv"></variable>
          <transform value="create"></transform>
        </target>
      </rule>
      <rule>
        <name value="addr"></name>
        <source>
          <context value="org"></context>
          <element value="addr"></element>
          <variable value="vvv"></variable>
        </source>
        <target>
          <context value="organization"></context>
          <contextType value="variable"></contextType>
          <element value="address"></element>
          <variable value="vvv"></variable>
          <transform value="create"></transform>
        </target>
      </rule>
    </rule>
  </group>
  <group>
    <name value="eVacDocChExtEprConfidentialityCode"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
CONFIDENTIALLITY CODE EXT
http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-confidentialitycode"></documentation>
    <input>
      <name value="src"></name>
      <type value="Coding"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="ext"></name>
      <type value="Extension"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="url"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="url"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-confidentialitycode"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="codableconcept"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <variable value="ccvalue"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="CodeableConcept"></valueString>
        </parameter>
      </target>
      <target>
        <context value="ccvalue"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
      </target>
      <rule>
        <name value="system"></name>
        <source>
          <context value="src"></context>
          <element value="system"></element>
          <variable value="ss"></variable>
        </source>
        <target>
          <context value="coding"></context>
          <contextType value="variable"></contextType>
          <element value="system"></element>
          <variable value="cs"></variable>
        </target>
        <target>
          <context value="cs"></context>
          <contextType value="variable"></contextType>
          <element value="value"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="ss"></valueId>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="code"></name>
        <source>
          <context value="src"></context>
          <element value="code"></element>
          <variable value="sc"></variable>
        </source>
        <target>
          <context value="coding"></context>
          <contextType value="variable"></contextType>
          <element value="code"></element>
          <variable value="cc"></variable>
        </target>
        <target>
          <context value="cc"></context>
          <contextType value="variable"></contextType>
          <element value="value"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="sc"></valueId>
          </parameter>
        </target>
      </rule>
      <rule>
        <name value="display"></name>
        <source>
          <context value="src"></context>
          <element value="display"></element>
          <variable value="sd"></variable>
        </source>
        <target>
          <context value="coding"></context>
          <contextType value="variable"></contextType>
          <element value="display"></element>
          <variable value="cd"></variable>
        </target>
        <target>
          <context value="cd"></context>
          <contextType value="variable"></contextType>
          <element value="value"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="sd"></valueId>
          </parameter>
        </target>
      </rule>
    </rule>
  </group>
  <group>
    <name value="LaborSerologyEntry"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
LABOR SEROLOGY ENTRY
http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-laboratory-serology"></documentation>
    <input>
      <name value="section"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="src"></name>
      <type value="Observation"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="observation"></name>
      <type value="Observation"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="meta"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="observation"></context>
        <contextType value="variable"></contextType>
        <element value="meta"></element>
        <variable value="meta"></variable>
      </target>
      <target>
        <context value="meta"></context>
        <contextType value="variable"></contextType>
        <element value="profile"></element>
        <variable value="profile"></variable>
      </target>
      <target>
        <context value="profile"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-laboratory-serology"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="patient"></name>
      <source>
        <context value="patient"></context>
      </source>
      <target>
        <context value="observation"></context>
        <contextType value="variable"></contextType>
        <element value="subject"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Patient"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %patient.id"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="id"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="observation"></context>
        <contextType value="variable"></contextType>
        <element value="identifier"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="statusCode"></name>
      <source>
        <context value="src"></context>
        <element value="statusCode"></element>
        <condition value="(src.statuscode.where('completed'))"></condition>
      </source>
      <target>
        <context value="observation"></context>
        <contextType value="variable"></contextType>
        <element value="status"></element>
        <transform value="c"></transform>
        <parameter>
          <valueString value="http://hl7.org/fhir/ValueSet/observation-status"></valueString>
        </parameter>
        <parameter>
          <valueString value="final"></valueString>
        </parameter>
        <parameter>
          <valueString value="Final"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="value"></name>
      <source>
        <context value="src"></context>
        <element value="effectiveTime"></element>
        <variable value="et"></variable>
      </source>
      <target>
        <context value="observation"></context>
        <contextType value="variable"></contextType>
        <element value="effective"></element>
        <variable value="value"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="dateTime"></valueString>
        </parameter>
      </target>
      <dependent>
        <name value="TSDateTime"></name>
        <variable value="et"></variable>
        <variable value="value"></variable>
      </dependent>
      <documentation value="src.effectiveTime -&gt; observation.effectiveDateTime;"></documentation>
    </rule>
    <rule>
      <name value="code"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="observation"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="value"></name>
      <source>
        <context value="src"></context>
        <element value="value"></element>
        <variable value="val"></variable>
        <condition value="((src.value.value.exists() = true) and (src.value.code.exists() = false))"></condition>
      </source>
      <target>
        <context value="observation"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <variable value="value"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Quantity"></valueString>
        </parameter>
      </target>
      <dependent>
        <name value="PQQuantity"></name>
        <variable value="val"></variable>
        <variable value="value"></variable>
      </dependent>
      <documentation value="src.value -&gt; observation.value;"></documentation>
    </rule>
    <rule>
      <name value="value"></name>
      <source>
        <context value="src"></context>
        <element value="value"></element>
        <variable value="val"></variable>
        <condition value="((src.value.code.exists() = true) and (src.value.value.exists() = false))"></condition>
      </source>
      <target>
        <context value="observation"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <variable value="value"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="CodeableConcept"></valueString>
        </parameter>
      </target>
      <dependent>
        <name value="CDCodeableConcept"></name>
        <variable value="val"></variable>
        <variable value="value"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="interpretationCode"></name>
      <source>
        <context value="src"></context>
        <element value="interpretationCode"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="observation"></context>
        <contextType value="variable"></contextType>
        <element value="interpretation"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="entryRelationship"></name>
      <source>
        <context value="src"></context>
        <element value="entryRelationship"></element>
        <variable value="entryRelationship"></variable>
      </source>
      <rule>
        <name value="act"></name>
        <source>
          <context value="entryRelationship"></context>
          <element value="act"></element>
          <variable value="act"></variable>
        </source>
        <rule>
          <name value="text"></name>
          <source>
            <context value="act"></context>
            <element value="text"></element>
            <variable value="cdaText"></variable>
          </source>
          <target>
            <context value="observation"></context>
            <contextType value="variable"></contextType>
            <element value="note"></element>
            <variable value="note"></variable>
          </target>
          <target>
            <context value="note"></context>
            <contextType value="variable"></contextType>
            <element value="text"></element>
            <transform value="copy"></transform>
            <parameter>
              <valueId value="cdaText"></valueId>
            </parameter>
          </target>
        </rule>
      </rule>
    </rule>
    <rule>
      <name value="performer"></name>
      <source>
        <context value="src"></context>
        <element value="performer"></element>
        <variable value="srcAuthor"></variable>
      </source>
      <dependent>
        <name value="BuildPerformer"></name>
        <variable value="srcAuthor"></variable>
        <variable value="observation"></variable>
        <variable value="bundle"></variable>
      </dependent>
    </rule>
  </group>
  <group>
    <name value="PregnancyEntry"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
PREGNANCY ENTRY
http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-pregnancy"></documentation>
    <input>
      <name value="section"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="src"></name>
      <type value="Observation"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="condition"></name>
      <type value="Condition"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="meta"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="condition"></context>
        <contextType value="variable"></contextType>
        <element value="meta"></element>
        <variable value="meta"></variable>
      </target>
      <target>
        <context value="meta"></context>
        <contextType value="variable"></contextType>
        <element value="profile"></element>
        <variable value="profile"></variable>
      </target>
      <target>
        <context value="profile"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-pastillnesses"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="patient"></name>
      <source>
        <context value="patient"></context>
      </source>
      <target>
        <context value="condition"></context>
        <contextType value="variable"></contextType>
        <element value="subject"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Patient"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %patient.id"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="id"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="condition"></context>
        <contextType value="variable"></contextType>
        <element value="identifier"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="coding"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
      </source>
      <target>
        <context value="condition"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="code"></variable>
      </target>
      <target>
        <context value="code"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <variable value="coding"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Coding"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://loinc.org"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="11779-6"></valueString>
        </parameter>
      </target>
      <target>
        <context value="coding"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Delivery date Estimated from last menstrual period"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="value"></name>
      <source>
        <context value="src"></context>
        <element value="value"></element>
        <variable value="obsvalue"></variable>
      </source>
      <target>
        <context value="condition"></context>
        <contextType value="variable"></contextType>
        <element value="onset"></element>
        <variable value="value"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="dateTime"></valueString>
        </parameter>
      </target>
      <dependent>
        <name value="TSDateTime"></name>
        <variable value="obsvalue"></variable>
        <variable value="value"></variable>
      </dependent>
    </rule>
  </group>
  <group>
    <name value="AllergyIntoleranceEntry"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
ALLERGY ENTRY
http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-allergyintolerances"></documentation>
    <input>
      <name value="section"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="src"></name>
      <type value="Act"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="allergy"></name>
      <type value="AllergyIntolerance"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="meta"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="allergy"></context>
        <contextType value="variable"></contextType>
        <element value="meta"></element>
        <variable value="meta"></variable>
      </target>
      <target>
        <context value="meta"></context>
        <contextType value="variable"></contextType>
        <element value="profile"></element>
        <variable value="profile"></variable>
      </target>
      <target>
        <context value="profile"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-allergyintolerances"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="id"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="allergy"></context>
        <contextType value="variable"></contextType>
        <element value="identifier"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="text"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="cdaText"></variable>
      </source>
      <target>
        <context value="allergy"></context>
        <contextType value="variable"></contextType>
        <element value="note"></element>
        <variable value="note"></variable>
      </target>
      <target>
        <context value="note"></context>
        <contextType value="variable"></contextType>
        <element value="text"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueId value="cdaText"></valueId>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="entryRelationship"></name>
      <source>
        <context value="src"></context>
        <element value="entryRelationship"></element>
        <variable value="entryRelationship"></variable>
      </source>
      <rule>
        <name value="observation"></name>
        <source>
          <context value="entryRelationship"></context>
          <element value="observation"></element>
          <variable value="observation"></variable>
        </source>
        <rule>
          <name value="value"></name>
          <source>
            <context value="observation"></context>
            <element value="value"></element>
            <variable value="value"></variable>
          </source>
          <rule>
            <name value="code"></name>
            <source>
              <context value="value"></context>
              <element value="code"></element>
              <variable value="cdaCode"></variable>
            </source>
            <target>
              <context value="allergy"></context>
              <contextType value="variable"></contextType>
              <element value="code"></element>
              <variable value="code"></variable>
            </target>
            <target>
              <context value="code"></context>
              <contextType value="variable"></contextType>
              <element value="coding"></element>
              <transform value="translate"></transform>
              <parameter>
                <valueId value="cdaCode"></valueId>
              </parameter>
              <parameter>
                <valueString value="http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-allergy-to-vacd-allergy-code-cm"></valueString>
              </parameter>
              <parameter>
                <valueString value="Coding"></valueString>
              </parameter>
            </target>
          </rule>
        </rule>
        <rule>
          <name value="cdaCode"></name>
          <source>
            <context value="observation"></context>
            <element value="code"></element>
            <variable value="cdaCode"></variable>
          </source>
          <rule>
            <name value="code"></name>
            <source>
              <context value="cdaCode"></context>
              <element value="code"></element>
              <variable value="cc"></variable>
            </source>
            <target>
              <context value="allergy"></context>
              <contextType value="variable"></contextType>
              <element value="category"></element>
              <transform value="translate"></transform>
              <parameter>
                <valueId value="cc"></valueId>
              </parameter>
              <parameter>
                <valueString value="http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-allergycode-to-chvacd-allergycategorie-cm"></valueString>
              </parameter>
              <parameter>
                <valueString value="code"></valueString>
              </parameter>
            </target>
          </rule>
          <rule>
            <name value="code"></name>
            <source>
              <context value="cdaCode"></context>
              <element value="code"></element>
              <variable value="cc"></variable>
            </source>
            <target>
              <context value="allergy"></context>
              <contextType value="variable"></contextType>
              <element value="type"></element>
              <transform value="translate"></transform>
              <parameter>
                <valueId value="cc"></valueId>
              </parameter>
              <parameter>
                <valueString value="http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-allergycode-to-chvacd-allergytype-cm"></valueString>
              </parameter>
              <parameter>
                <valueString value="code"></valueString>
              </parameter>
            </target>
          </rule>
        </rule>
      </rule>
    </rule>
  </group>
  <group>
    <name value="PastIllnessEntry"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
PAST ILLNESS ENTRY
http://fhir.ch/ig/ch-vacd/StructureDefinition-ch-vacd-pastillnesses.html"></documentation>
    <input>
      <name value="section"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="src"></name>
      <type value="Act"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="pastIllness"></name>
      <type value="Condition"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="meta"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="pastIllness"></context>
        <contextType value="variable"></contextType>
        <element value="meta"></element>
        <variable value="meta"></variable>
      </target>
      <target>
        <context value="meta"></context>
        <contextType value="variable"></contextType>
        <element value="profile"></element>
        <variable value="profile"></variable>
      </target>
      <target>
        <context value="profile"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-pastillnesses"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="patient"></name>
      <source>
        <context value="patient"></context>
      </source>
      <target>
        <context value="pastIllness"></context>
        <contextType value="variable"></contextType>
        <element value="subject"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Patient"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %patient.id"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="id"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="pastIllness"></context>
        <contextType value="variable"></contextType>
        <element value="identifier"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="statusCode"></name>
      <source>
        <context value="src"></context>
        <element value="statusCode"></element>
        <variable value="statuscode"></variable>
        <condition value="(src.statusCode.where('completed'))"></condition>
      </source>
      <target>
        <context value="pastIllness"></context>
        <contextType value="variable"></contextType>
        <element value="verificationStatus"></element>
        <transform value="cc"></transform>
        <parameter>
          <valueString value="http://terminology.hl7.org/CodeSystem/condition-ver-status"></valueString>
        </parameter>
        <parameter>
          <valueString value="confirmed"></valueString>
        </parameter>
        <parameter>
          <valueString value="Confirmed"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="effectiveTime"></name>
      <source>
        <context value="src"></context>
        <element value="effectiveTime"></element>
        <variable value="et"></variable>
      </source>
      <rule>
        <name value="low"></name>
        <source>
          <context value="et"></context>
          <element value="low"></element>
          <variable value="date"></variable>
        </source>
        <target>
          <context value="pastIllness"></context>
          <contextType value="variable"></contextType>
          <element value="recordedDate"></element>
          <transform value="copy"></transform>
          <parameter>
            <valueId value="date"></valueId>
          </parameter>
        </target>
      </rule>
    </rule>
    <rule>
      <name value="entryRelationship"></name>
      <source>
        <context value="src"></context>
        <element value="entryRelationship"></element>
        <variable value="entryRelationship"></variable>
      </source>
      <rule>
        <name value="observation"></name>
        <source>
          <context value="entryRelationship"></context>
          <element value="observation"></element>
          <variable value="observation"></variable>
        </source>
        <rule>
          <name value="code"></name>
          <source>
            <context value="observation"></context>
            <element value="code"></element>
            <variable value="obscode"></variable>
          </source>
          <rule>
            <name value="code"></name>
            <source>
              <context value="obscode"></context>
              <element value="code"></element>
              <variable value="codecode"></variable>
            </source>
            <target>
              <context value="pastIllness"></context>
              <contextType value="variable"></contextType>
              <element value="code"></element>
              <transform value="translate"></transform>
              <parameter>
                <valueId value="codecode"></valueId>
              </parameter>
              <parameter>
                <valueString value="http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-diseases-to-vacd-diseasesandillnesses-cm"></valueString>
              </parameter>
              <parameter>
                <valueString value="Coding"></valueString>
              </parameter>
            </target>
          </rule>
          <documentation value="observation.code  -&gt; pastIllness.code;"></documentation>
        </rule>
        <rule>
          <name value="statusCode"></name>
          <source>
            <context value="observation"></context>
            <element value="statusCode"></element>
            <variable value="statusCode"></variable>
            <condition value="(observation.statusCode.where('completed'))"></condition>
          </source>
          <target>
            <context value="pastIllness"></context>
            <contextType value="variable"></contextType>
            <element value="clinicalStatus"></element>
            <transform value="cc"></transform>
            <parameter>
              <valueString value="http://terminology.hl7.org/CodeSystem/condition-clinical"></valueString>
            </parameter>
            <parameter>
              <valueString value="resolved"></valueString>
            </parameter>
            <parameter>
              <valueString value="Resolved"></valueString>
            </parameter>
          </target>
        </rule>
        <rule>
          <name value="effectiveTime"></name>
          <source>
            <context value="observation"></context>
            <element value="effectiveTime"></element>
            <variable value="et"></variable>
          </source>
          <rule>
            <name value="value"></name>
            <source>
              <context value="et"></context>
              <element value="low"></element>
              <variable value="low"></variable>
            </source>
            <target>
              <context value="pastIllness"></context>
              <contextType value="variable"></contextType>
              <element value="onset"></element>
              <variable value="value"></variable>
              <transform value="create"></transform>
              <parameter>
                <valueString value="dateTime"></valueString>
              </parameter>
            </target>
            <dependent>
              <name value="TSDateTime"></name>
              <variable value="low"></variable>
              <variable value="value"></variable>
            </dependent>
          </rule>
          <documentation value="observation.effectiveTime as effectiveTime -&gt; pastIllness.onset = create('dateTime') as value then TSDateTime(effectiveTime, value) &quot;value&quot;;"></documentation>
        </rule>
      </rule>
    </rule>
  </group>
  <group>
    <name value="ImmunizationRecommendationEntry"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
IMMUNIZATION RECOMMENDATION ENTRY
http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-immunization-recommendations"></documentation>
    <input>
      <name value="section"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="src"></name>
      <type value="SubstanceAdministration"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="organization"></name>
      <type value="Organization"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="immunizRecomm"></name>
      <type value="ImmunizationRecommendation"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="meta"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="immunizRecomm"></context>
        <contextType value="variable"></contextType>
        <element value="meta"></element>
        <variable value="meta"></variable>
      </target>
      <target>
        <context value="meta"></context>
        <contextType value="variable"></contextType>
        <element value="profile"></element>
        <variable value="profile"></variable>
      </target>
      <target>
        <context value="profile"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-immunization-recommendations"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="id"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="immunizRecomm"></context>
        <contextType value="variable"></contextType>
        <element value="identifier"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="text"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="text"></variable>
      </source>
      <rule>
        <name value="reference"></name>
        <source>
          <context value="text"></context>
          <element value="reference"></element>
          <variable value="reference"></variable>
        </source>
        <rule>
          <name value="narrativeLink"></name>
          <source>
            <context value="reference"></context>
            <element value="value"></element>
            <variable value="value"></variable>
          </source>
          <target>
            <context value="immunizRecomm"></context>
            <contextType value="variable"></contextType>
            <element value="extension"></element>
            <variable value="ext"></variable>
          </target>
          <dependent>
            <name value="NarrativeLink"></name>
            <variable value="value"></variable>
            <variable value="ext"></variable>
          </dependent>
        </rule>
      </rule>
    </rule>
    <rule>
      <name value="documentOrg"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="immunizRecomm"></context>
        <contextType value="variable"></contextType>
        <element value="authority"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Organization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %organization.id"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="consumable"></name>
      <source>
        <context value="src"></context>
        <element value="consumable"></element>
        <variable value="consumable"></variable>
      </source>
      <rule>
        <name value="manufacturedProduct"></name>
        <source>
          <context value="consumable"></context>
          <element value="manufacturedProduct"></element>
          <variable value="manufacturedProduct"></variable>
        </source>
        <rule>
          <name value="manufacturedMaterial"></name>
          <source>
            <context value="manufacturedProduct"></context>
            <element value="manufacturedMaterial"></element>
            <variable value="manufacturedMaterial"></variable>
          </source>
          <rule>
            <name value="mmcode"></name>
            <source>
              <context value="manufacturedMaterial"></context>
              <element value="name"></element>
              <variable value="mmcode"></variable>
            </source>
            <rule>
              <name value="other"></name>
              <source>
                <context value="mmcode"></context>
                <element value="other"></element>
                <variable value="codeName"></variable>
              </source>
              <target>
                <context value="immunizRecomm"></context>
                <contextType value="variable"></contextType>
                <element value="recommendation"></element>
                <variable value="recommendation"></variable>
              </target>
              <target>
                <context value="recommendation"></context>
                <contextType value="variable"></contextType>
                <element value="vaccineCode"></element>
                <variable value="vco"></variable>
                <listMode value="last"></listMode>
                <transform value="translate"></transform>
                <parameter>
                  <valueId value="codeName"></valueId>
                </parameter>
                <parameter>
                  <valueString value="http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-recommendation-to-vacd-vaccination-plan-cm"></valueString>
                </parameter>
                <parameter>
                  <valueString value="Coding"></valueString>
                </parameter>
              </target>
            </rule>
            <documentation value="manufacturedMaterial.name as name -&gt;  immunizRecomm.recommendation as recommendation, recommendation.description = name;"></documentation>
          </rule>
        </rule>
      </rule>
    </rule>
  </group>
  <group>
    <name value="ImmunizationEntry"></name>
    <typeMode value="none"></typeMode>
    <documentation value="///////////////////////////////////////////////////////////////////////
IMMUNIZATION ENTRY
http://fhir.ch/ig/ch-vacd/StructureDefinition-ch-vacd-immunization.html"></documentation>
    <input>
      <name value="section"></name>
      <type value="Section"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="src"></name>
      <type value="SubstanceAdministration"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="patient"></name>
      <type value="Patient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="immunization"></name>
      <type value="Immunization"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="meta"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="immunization"></context>
        <contextType value="variable"></contextType>
        <element value="meta"></element>
        <variable value="meta"></variable>
      </target>
      <target>
        <context value="meta"></context>
        <contextType value="variable"></contextType>
        <element value="profile"></element>
        <variable value="profile"></variable>
      </target>
      <target>
        <context value="profile"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-vacd/StructureDefinition/ch-vacd-immunization"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="id"></name>
      <source>
        <context value="src"></context>
        <element value="id"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="immunization"></context>
        <contextType value="variable"></contextType>
        <element value="identifier"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
      <documentation value="src.templateId as template then TemplateID(template, immunization) &quot;templateId&quot;;"></documentation>
    </rule>
    <rule>
      <name value="patient"></name>
      <source>
        <context value="patient"></context>
      </source>
      <target>
        <context value="immunization"></context>
        <contextType value="variable"></contextType>
        <element value="patient"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Patient"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %patient.id"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="completed"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="immunization"></context>
        <contextType value="variable"></contextType>
        <element value="status"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="completed"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="text"></name>
      <source>
        <context value="src"></context>
        <element value="text"></element>
        <variable value="text"></variable>
      </source>
      <rule>
        <name value="reference"></name>
        <source>
          <context value="text"></context>
          <element value="reference"></element>
          <variable value="reference"></variable>
        </source>
        <rule>
          <name value="narrativeLink"></name>
          <source>
            <context value="reference"></context>
            <element value="value"></element>
            <variable value="value"></variable>
          </source>
          <target>
            <context value="immunization"></context>
            <contextType value="variable"></contextType>
            <element value="extension"></element>
            <variable value="ext"></variable>
          </target>
          <dependent>
            <name value="NarrativeLink"></name>
            <variable value="value"></variable>
            <variable value="ext"></variable>
          </dependent>
        </rule>
      </rule>
    </rule>
    <rule>
      <name value="consumable"></name>
      <source>
        <context value="src"></context>
        <element value="consumable"></element>
        <variable value="consumable"></variable>
      </source>
      <rule>
        <name value="manufacturedProduct"></name>
        <source>
          <context value="consumable"></context>
          <element value="manufacturedProduct"></element>
          <variable value="manufacturedProduct"></variable>
        </source>
        <rule>
          <name value="manufacturedMaterial"></name>
          <source>
            <context value="manufacturedProduct"></context>
            <element value="manufacturedMaterial"></element>
            <variable value="manufacturedMaterial"></variable>
          </source>
          <rule>
            <name value="mmcode"></name>
            <source>
              <context value="manufacturedMaterial"></context>
              <element value="code"></element>
              <variable value="mmcode"></variable>
            </source>
            <rule>
              <name value="displayName"></name>
              <source>
                <context value="mmcode"></context>
                <element value="displayName"></element>
                <variable value="codeId"></variable>
              </source>
              <target>
                <context value="immunization"></context>
                <contextType value="variable"></contextType>
                <element value="vaccineCode"></element>
                <variable value="vaccineCode"></variable>
              </target>
              <target>
                <context value="vaccineCode"></context>
                <contextType value="variable"></contextType>
                <element value="coding"></element>
                <transform value="translate"></transform>
                <parameter>
                  <valueId value="codeId"></valueId>
                </parameter>
                <parameter>
                  <valueString value="http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-vaccine-to-vacd-vaccine-cm"></valueString>
                </parameter>
                <parameter>
                  <valueString value="Coding"></valueString>
                </parameter>
              </target>
            </rule>
            <documentation value="manufacturedMaterial.code as mmcode -&gt; immunization.vaccineCode as vaccineCode, vaccineCode.coding = mmcode;"></documentation>
          </rule>
        </rule>
      </rule>
      <documentation value="src -&gt; immunization.contained = create('Immunization') as immunization then ManufacturedMaterialEntryContentModuleStatement(src, medicationStatement, medication) &quot;medication&quot;;"></documentation>
    </rule>
    <rule>
      <name value="author"></name>
      <source>
        <context value="src"></context>
        <element value="author"></element>
        <variable value="srcAuthor"></variable>
      </source>
      <dependent>
        <name value="ImmunizationPerformer"></name>
        <variable value="srcAuthor"></variable>
        <variable value="immunization"></variable>
        <variable value="bundle"></variable>
      </dependent>
      <documentation value="src.author"></documentation>
    </rule>
    <rule>
      <name value="entryRelationship"></name>
      <source>
        <context value="src"></context>
        <element value="entryRelationship"></element>
        <variable value="entryRelationship"></variable>
      </source>
      <rule>
        <name value="observation"></name>
        <source>
          <context value="entryRelationship"></context>
          <element value="observation"></element>
          <variable value="observation"></variable>
        </source>
        <rule>
          <name value="code"></name>
          <source>
            <context value="observation"></context>
            <element value="code"></element>
            <variable value="code"></variable>
          </source>
          <rule>
            <name value="code"></name>
            <source>
              <context value="code"></context>
              <element value="code"></element>
              <variable value="codeid"></variable>
            </source>
            <target>
              <context value="immunization"></context>
              <contextType value="variable"></contextType>
              <element value="protocolApplied"></element>
              <variable value="protocolApplied"></variable>
            </target>
            <target>
              <context value="protocolApplied"></context>
              <contextType value="variable"></contextType>
              <element value="targetDisease"></element>
              <transform value="translate"></transform>
              <parameter>
                <valueId value="codeid"></valueId>
              </parameter>
              <parameter>
                <valueString value="http://fhir.ch/ig/evacdoc-fhir-maps/ConceptMap/evacdoc-procedure-to-vacd-disorder-cm"></valueString>
              </parameter>
              <parameter>
                <valueString value="CodeableConcept"></valueString>
              </parameter>
            </target>
          </rule>
        </rule>
      </rule>
    </rule>
    <rule>
      <name value="precondition"></name>
      <source>
        <context value="src"></context>
        <element value="precondition"></element>
        <variable value="precondition"></variable>
      </source>
      <rule>
        <name value="criterion"></name>
        <source>
          <context value="precondition"></context>
          <element value="criterion"></element>
          <variable value="criterion"></variable>
        </source>
        <rule>
          <name value="coding"></name>
          <source>
            <context value="criterion"></context>
            <element value="code"></element>
            <variable value="code"></variable>
          </source>
          <target>
            <context value="immunization"></context>
            <contextType value="variable"></contextType>
            <element value="reasonCode"></element>
            <variable value="reasonCode"></variable>
          </target>
          <target>
            <context value="reasonCode"></context>
            <contextType value="variable"></contextType>
            <element value="coding"></element>
            <transform value="copy"></transform>
            <parameter>
              <valueId value="code"></valueId>
            </parameter>
          </target>
        </rule>
      </rule>
      <documentation value="&lt;precondition&gt;"></documentation>
    </rule>
  </group>
  <group>
    <name value="ENString"></name>
    <extends value="Any"></extends>
    <typeMode value="types"></typeMode>
    <input>
      <name value="src"></name>
      <type value="EN"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <type value="string"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="family"></name>
      <source>
        <context value="src"></context>
        <element value="family"></element>
        <variable value="f"></variable>
      </source>
      <target>
        <contextType value="variable"></contextType>
        <variable value="val"></variable>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="f.dataString"></valueString>
        </parameter>
      </target>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="Organization "></valueString>
        </parameter>
        <parameter>
          <valueId value="val"></valueId>
        </parameter>
      </target>
    </rule>
  </group>
  <group>
    <name value="eVacDocVaccineCode"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="src"></name>
      <type value="Coding"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <type value="Coding"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="system"></name>
      <source>
        <context value="src"></context>
        <element value="system"></element>
        <variable value="ss"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="system"></element>
        <variable value="cs"></variable>
      </target>
      <target>
        <context value="cs"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueId value="ss"></valueId>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="code"></name>
      <source>
        <context value="src"></context>
        <element value="code"></element>
        <variable value="sc"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="code"></element>
        <variable value="cc"></variable>
      </target>
      <target>
        <context value="cc"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueId value="sc"></valueId>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="display"></name>
      <source>
        <context value="src"></context>
        <element value="display"></element>
        <variable value="sd"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="display"></element>
        <variable value="cd"></variable>
      </target>
      <target>
        <context value="cd"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueId value="sd"></valueId>
        </parameter>
      </target>
    </rule>
  </group>
  <group>
    <name value="ChExtEprTime"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="src"></name>
      <type value="TSDateTime"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="ext"></name>
      <type value="Extension"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="url"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="url"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-time"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="value"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <variable value="value"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="dateTime"></valueString>
        </parameter>
      </target>
      <dependent>
        <name value="TSDateTime"></name>
        <variable value="src"></variable>
        <variable value="value"></variable>
      </dependent>
    </rule>
  </group>
  <group>
    <name value="ChExtEprSectionId"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="src"></name>
      <type value="II"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="ext"></name>
      <type value="Extension"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="url"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="url"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-sectionid"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="value"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <variable value="value"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Identifier"></valueString>
        </parameter>
      </target>
      <dependent>
        <name value="II"></name>
        <variable value="src"></variable>
        <variable value="value"></variable>
      </dependent>
    </rule>
  </group>
  <group>
    <name value="NarrativeLink"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="url"></name>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="ext"></name>
      <type value="Extension"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="url"></name>
      <source>
        <context value="url"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="url"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://hl7.org/fhir/StructureDefinition/narrativeLink"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="value"></name>
      <source>
        <context value="url"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <variable value="value"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="url"></valueString>
        </parameter>
      </target>
      <target>
        <context value="value"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueId value="url"></valueId>
        </parameter>
      </target>
    </rule>
  </group>
  <group>
    <name value="eVacDocExtConfCodeCodeableConcept"></name>
    <extends value="Any"></extends>
    <typeMode value="types"></typeMode>
    <input>
      <name value="src"></name>
      <type value="CE"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="tgt"></name>
      <type value="CodeableConcept"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="originalText"></name>
      <source>
        <context value="src"></context>
        <element value="originalText"></element>
        <variable value="vvv"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="text"></element>
        <variable value="vvv"></variable>
        <transform value="create"></transform>
      </target>
    </rule>
    <rule>
      <name value="code"></name>
      <source>
        <context value="src"></context>
        <variable value="code"></variable>
      </source>
      <target>
        <context value="tgt"></context>
        <contextType value="variable"></contextType>
        <element value="coding"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueId value="code"></valueId>
        </parameter>
      </target>
    </rule>
  </group>
  <group>
    <name value="eVacDocChExtEprVersionNumber"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="src"></name>
      <type value="INT"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="ext"></name>
      <type value="Extension"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="url"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="url"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-versionnumber"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="value"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <variable value="value"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="unsignedInt"></valueString>
        </parameter>
      </target>
      <dependent>
        <name value="INT"></name>
        <variable value="src"></variable>
        <variable value="value"></variable>
      </dependent>
    </rule>
  </group>
  <group>
    <name value="eVacDocChExtEprInformationRecipientOrganization"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="src"></name>
      <type value="IntendedRecipient"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="organization"></name>
      <type value="Organization"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="ext"></name>
      <type value="Extension"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="url"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="url"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-informationrecipient"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="value"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Organization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %organization.id"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="organization"></name>
      <source>
        <context value="src"></context>
        <element value="receivedOrganization"></element>
        <variable value="receivedOrganization"></variable>
      </source>
      <dependent>
        <name value="ClinicalDocumentOrganization"></name>
        <variable value="receivedOrganization"></variable>
        <variable value="organization"></variable>
      </dependent>
    </rule>
  </group>
  <group>
    <name value="eVacDocChExtEprDataEnterer"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="src"></name>
      <type value="DataEnterer"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="person"></name>
      <type value="Person"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="ext"></name>
      <type value="Extension"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="url"></name>
      <source>
        <context value="src"></context>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="url"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-dataenterer"></valueString>
        </parameter>
      </target>
    </rule>
    <rule>
      <name value="person"></name>
      <source>
        <context value="src"></context>
        <element value="assignedEntity"></element>
        <variable value="assignedEntity"></variable>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="ext"></variable>
      </target>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="url"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="enterer"></valueString>
        </parameter>
      </target>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="value"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Person"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %person.id"></valueString>
        </parameter>
      </target>
      <dependent>
        <name value="ClinicalDocumentEntityPerson"></name>
        <variable value="assignedEntity"></variable>
        <variable value="person"></variable>
      </dependent>
    </rule>
    <rule>
      <name value="time"></name>
      <source>
        <context value="src"></context>
        <element value="time"></element>
        <variable value="time"></variable>
      </source>
      <target>
        <context value="ext"></context>
        <contextType value="variable"></contextType>
        <element value="extension"></element>
        <variable value="exttime"></variable>
      </target>
      <dependent>
        <name value="ChExtEprTime"></name>
        <variable value="time"></variable>
        <variable value="exttime"></variable>
      </dependent>
    </rule>
  </group>
  <group>
    <name value="ImmunizationPerformer"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="author"></name>
      <type value="Author"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="resource"></name>
      <type value="Resource"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="srcAuthor"></name>
      <source>
        <context value="author"></context>
        <variable value="srcAuthor"></variable>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="practitioner"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Practitioner"></valueString>
        </parameter>
      </target>
      <target>
        <context value="practitioner"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid2"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid2"></valueId>
        </parameter>
      </target>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e2"></variable>
      </target>
      <target>
        <context value="e2"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="organization"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Organization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="organization"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid3"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e2"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid3"></valueId>
        </parameter>
      </target>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e3"></variable>
      </target>
      <target>
        <context value="e3"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="practionerRole"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="PractitionerRole"></valueString>
        </parameter>
      </target>
      <target>
        <context value="practionerRole"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid4"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e3"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid4"></valueId>
        </parameter>
      </target>
      <target>
        <context value="practionerRole"></context>
        <contextType value="variable"></contextType>
        <element value="organization"></element>
        <variable value="reference1"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference1"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Organization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference1"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %organization.id"></valueString>
        </parameter>
      </target>
      <target>
        <context value="practionerRole"></context>
        <contextType value="variable"></contextType>
        <element value="practitioner"></element>
        <variable value="reference2"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference2"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Practitioner"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference2"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %practitioner.id"></valueString>
        </parameter>
      </target>
      <target>
        <context value="resource"></context>
        <contextType value="variable"></contextType>
        <element value="performer"></element>
        <variable value="performer"></variable>
      </target>
      <target>
        <context value="performer"></context>
        <contextType value="variable"></contextType>
        <element value="actor"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="PractitionerRole"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %practionerRole.id"></valueString>
        </parameter>
      </target>
      <rule>
        <name value="time"></name>
        <source>
          <context value="srcAuthor"></context>
          <element value="time"></element>
          <variable value="time"></variable>
        </source>
        <target>
          <context value="reference2"></context>
          <contextType value="variable"></contextType>
          <element value="extension"></element>
          <variable value="exttime"></variable>
        </target>
        <dependent>
          <name value="ChExtEprTime"></name>
          <variable value="time"></variable>
          <variable value="exttime"></variable>
        </dependent>
      </rule>
      <rule>
        <name value="assignedAuthor"></name>
        <source>
          <context value="srcAuthor"></context>
          <element value="assignedAuthor"></element>
          <variable value="assignedAuthor"></variable>
        </source>
        <rule>
          <name value="id"></name>
          <source>
            <context value="assignedAuthor"></context>
            <element value="id"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="practitioner"></context>
            <contextType value="variable"></contextType>
            <element value="identifier"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
        <rule>
          <name value="addr"></name>
          <source>
            <context value="assignedAuthor"></context>
            <element value="addr"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="practitioner"></context>
            <contextType value="variable"></contextType>
            <element value="address"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
        <rule>
          <name value="addr"></name>
          <source>
            <context value="assignedAuthor"></context>
            <element value="addr"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="organization"></context>
            <contextType value="variable"></contextType>
            <element value="address"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
        <rule>
          <name value="telecom"></name>
          <source>
            <context value="assignedAuthor"></context>
            <element value="telecom"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="practitioner"></context>
            <contextType value="variable"></contextType>
            <element value="telecom"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
        <rule>
          <name value="name"></name>
          <source>
            <context value="assignedAuthor"></context>
            <element value="assignedPerson"></element>
            <variable value="person"></variable>
          </source>
          <rule>
            <name value="name"></name>
            <source>
              <context value="person"></context>
              <element value="name"></element>
              <variable value="vvv"></variable>
            </source>
            <target>
              <context value="practitioner"></context>
              <contextType value="variable"></contextType>
              <element value="name"></element>
              <variable value="vvv"></variable>
              <transform value="create"></transform>
            </target>
          </rule>
          <rule>
            <name value="name"></name>
            <source>
              <context value="person"></context>
              <element value="name"></element>
              <variable value="vvv"></variable>
            </source>
            <target>
              <context value="organization"></context>
              <contextType value="variable"></contextType>
              <element value="name"></element>
              <variable value="vvv"></variable>
              <transform value="create"></transform>
            </target>
          </rule>
        </rule>
      </rule>
    </rule>
  </group>
  <group>
    <name value="BuildPerformer"></name>
    <typeMode value="none"></typeMode>
    <input>
      <name value="author"></name>
      <type value="Author"></type>
      <mode value="source"></mode>
    </input>
    <input>
      <name value="resource"></name>
      <type value="Resource"></type>
      <mode value="target"></mode>
    </input>
    <input>
      <name value="bundle"></name>
      <type value="Bundle"></type>
      <mode value="target"></mode>
    </input>
    <rule>
      <name value="srcAuthor"></name>
      <source>
        <context value="author"></context>
        <variable value="srcAuthor"></variable>
      </source>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e"></variable>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="practitioner"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Practitioner"></valueString>
        </parameter>
      </target>
      <target>
        <context value="practitioner"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid2"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid2"></valueId>
        </parameter>
      </target>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e2"></variable>
      </target>
      <target>
        <context value="e2"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="organization"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Organization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="organization"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid3"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e2"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid3"></valueId>
        </parameter>
      </target>
      <target>
        <context value="bundle"></context>
        <contextType value="variable"></contextType>
        <element value="entry"></element>
        <variable value="e3"></variable>
      </target>
      <target>
        <context value="e3"></context>
        <contextType value="variable"></contextType>
        <element value="resource"></element>
        <variable value="practionerRole"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="PractitionerRole"></valueString>
        </parameter>
      </target>
      <target>
        <context value="practionerRole"></context>
        <contextType value="variable"></contextType>
        <element value="id"></element>
        <variable value="uuid4"></variable>
        <transform value="uuid"></transform>
      </target>
      <target>
        <context value="e3"></context>
        <contextType value="variable"></contextType>
        <element value="fullUrl"></element>
        <transform value="append"></transform>
        <parameter>
          <valueString value="urn:uuid:"></valueString>
        </parameter>
        <parameter>
          <valueId value="uuid4"></valueId>
        </parameter>
      </target>
      <target>
        <context value="practionerRole"></context>
        <contextType value="variable"></contextType>
        <element value="organization"></element>
        <variable value="reference1"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference1"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Organization"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference1"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %organization.id"></valueString>
        </parameter>
      </target>
      <target>
        <context value="practionerRole"></context>
        <contextType value="variable"></contextType>
        <element value="practitioner"></element>
        <variable value="reference2"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference2"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="Practitioner"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference2"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %practitioner.id"></valueString>
        </parameter>
      </target>
      <target>
        <context value="resource"></context>
        <contextType value="variable"></contextType>
        <element value="performer"></element>
        <variable value="reference"></variable>
        <transform value="create"></transform>
        <parameter>
          <valueString value="Reference"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="type"></element>
        <transform value="copy"></transform>
        <parameter>
          <valueString value="PractitionerRole"></valueString>
        </parameter>
      </target>
      <target>
        <context value="reference"></context>
        <contextType value="variable"></contextType>
        <element value="reference"></element>
        <transform value="evaluate"></transform>
        <parameter>
          <valueString value="'urn:uuid:' + %practionerRole.id"></valueString>
        </parameter>
      </target>
      <rule>
        <name value="time"></name>
        <source>
          <context value="srcAuthor"></context>
          <element value="time"></element>
          <variable value="time"></variable>
        </source>
        <target>
          <context value="reference2"></context>
          <contextType value="variable"></contextType>
          <element value="extension"></element>
          <variable value="exttime"></variable>
        </target>
        <dependent>
          <name value="ChExtEprTime"></name>
          <variable value="time"></variable>
          <variable value="exttime"></variable>
        </dependent>
      </rule>
      <rule>
        <name value="assignedAuthor"></name>
        <source>
          <context value="srcAuthor"></context>
          <element value="assignedEntity"></element>
          <variable value="assignedEntity"></variable>
        </source>
        <rule>
          <name value="id"></name>
          <source>
            <context value="assignedEntity"></context>
            <element value="id"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="practitioner"></context>
            <contextType value="variable"></contextType>
            <element value="identifier"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
        <rule>
          <name value="addr"></name>
          <source>
            <context value="assignedEntity"></context>
            <element value="addr"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="practitioner"></context>
            <contextType value="variable"></contextType>
            <element value="address"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
        <rule>
          <name value="addr"></name>
          <source>
            <context value="assignedEntity"></context>
            <element value="addr"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="organization"></context>
            <contextType value="variable"></contextType>
            <element value="address"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
        <rule>
          <name value="telecom"></name>
          <source>
            <context value="assignedEntity"></context>
            <element value="telecom"></element>
            <variable value="vvv"></variable>
          </source>
          <target>
            <context value="practitioner"></context>
            <contextType value="variable"></contextType>
            <element value="telecom"></element>
            <variable value="vvv"></variable>
            <transform value="create"></transform>
          </target>
        </rule>
        <rule>
          <name value="assignedPerson"></name>
          <source>
            <context value="assignedEntity"></context>
            <element value="assignedPerson"></element>
            <variable value="person"></variable>
          </source>
          <rule>
            <name value="name"></name>
            <source>
              <context value="person"></context>
              <element value="name"></element>
              <variable value="vvv"></variable>
            </source>
            <target>
              <context value="practitioner"></context>
              <contextType value="variable"></contextType>
              <element value="name"></element>
              <variable value="vvv"></variable>
              <transform value="create"></transform>
            </target>
          </rule>
        </rule>
        <rule>
          <name value="representedOrganization"></name>
          <source>
            <context value="assignedEntity"></context>
            <element value="representedOrganization"></element>
            <variable value="representedOrganization"></variable>
          </source>
          <rule>
            <name value="name"></name>
            <source>
              <context value="representedOrganization"></context>
              <element value="name"></element>
              <variable value="name"></variable>
            </source>
            <target>
              <context value="organization"></context>
              <contextType value="variable"></contextType>
              <element value="name"></element>
              <transform value="copy"></transform>
              <parameter>
                <valueId value="name"></valueId>
              </parameter>
            </target>
          </rule>
        </rule>
      </rule>
    </rule>
  </group>
</StructureMap>
